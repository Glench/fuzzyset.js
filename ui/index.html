<!DOCTYPE html>
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  <style>
    .fuzzyset-excode {
      display: grid;
    }
    table thead tr, table thead tr td, table thead tr th {
      background-color: transparent !important;
    }
    table thead tr th[rowspan="2"],
    table thead tr:last-child th {
      border-bottom: 1px solid #999;
    }
    .no-zebra > tbody > tr {
      background-color: transparent !important;
    }
    .no-zebra > tbody > tr > th, .no-zebra > tbody > tr > td {
      background-color: transparent; !important;
    }
    .unhighlight {
      color: #aaa;
    }
    tr.highlight td {
      background-color: #ffffd0;
      font-weight: bold;
    }
    small {
      font-size: 13px !important;
    }
    a.remove {
      font-size: 15px;
      padding: 3px 5px;
    }
    a.remove:hover {
      color: red;
      text-decoration: none;
    }
    .small-p {
      font-size: 13px;
      font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
    }
    .CodeMirror {
      font-size: 14px !important;
      background-color: #f6f8fa !important;
      border: 1px solid #dfe2e5;
      padding: 5px;
    }
    .error .CodeMirror {
      background-color: #fff2f2 !important;
      border: 1px solid red;
    }
    .fuzzyset-wide {
      margin: 30px -20px 50px -20px;
      padding: 0 20px;
      box-shadow: 0 0 10px rgba(0,0,0, .3);
    }
    .fuzzyset-wide > h3 {
      margin-top: 0;
      font-size: 22px !important;
    }
    .fuzzyset-math p {
      margin-bottom: 5px !important;
    }
    .fuzzyset-storage h4 {
      text-align: center;
    }
    #intro-container {
      background-color: #252a2f;
      padding-top: 60px;
      padding-bottom: 40px;
    }
    #intro {
      padding: 20px 30px;
      background-color: white;
      border: 1px solid #ccc;
      width: 800px;
      margin: 0px auto;
      font-size: 16px;
    }
    #intro p {
      margin: 15px 0;
    }

    #fuzzyset-storage .result td {
      font-family: Courier, "PT Mono", monospace;
      font-size: 15px;
    }
    .detail-hover {
      cursor: default;
    }
    .detail-hover:hover {
      color: red;
    }

    textarea {
      border: 1px solid #ccc;
    }

    label {
      font-weight: normal !important;
    }

    tr.filtered td {
      opacity: 0.5;
    }

    .markdown-body table tr.first-filtered td {
      border-top: 2px solid #bdbdbd !important;
    }
    th.sorted:after {
      content: '\25BC';
      padding-left: 3px;
    }
    #fuzzyend p {
      margin: 15px 0;
    }

    #popup-overlay.markdown-body>*:last-child {
      margin-bottom: auto !important;
    }
    #popup-overlay.markdown-body table {
      display: inline-block !important;
      width: auto !important;
    }
  </style>
    
  <link rel="dns-prefetch" href="https://assets-cdn.github.com/">
  <link rel="dns-prefetch" href="https://avatars0.githubusercontent.com/">
  <link rel="dns-prefetch" href="https://avatars1.githubusercontent.com/">
  <link rel="dns-prefetch" href="https://avatars2.githubusercontent.com/">
  <link rel="dns-prefetch" href="https://avatars3.githubusercontent.com/">
  <link rel="dns-prefetch" href="https://github-cloud.s3.amazonaws.com/">
  <link rel="dns-prefetch" href="https://user-images.githubusercontent.com/">


  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@glenchsite" />
  <meta name="twitter:creator" content="@glench" />
  <meta property="og:type" content="article" />
  <meta property="og:url" content="http://glench.github.io/fuzzyset.js/ui/" />
  <meta property="og:title" content="Fuzzyset" />
  <meta property="og:description" content="An interactive human-readable visualization of a code library" />
  <meta property="og:image" content="http://glench.github.io/fuzzyset.js/ui/screenshot.png" />
  




  <link media="all"  rel="stylesheet" href="./codemirror-5.38.0/lib/codemirror.css">
  <link media="all"  rel="stylesheet" href="./codemirror-5.38.0/theme/github.css">

  <link media="all"  rel="stylesheet" href="./ui_files/frameworks-23c9e7262eee71bc6f67f6950190a162.css">
  <link media="all"  rel="stylesheet" href="./ui_files/github-6c7a91a667cda2df911e2af635cea73f.css">
  
  
  <link media="all"  rel="stylesheet" href="./ui_files/site-7472e7b4603d4095447d49d428375ab8.css">
  

  <meta name="viewport" content="width=device-width">
  
  <title>Fuzzyset - an interactive human-readable visualization of a code library</title>
    <meta name="description" content="A how-it-works-style research prototype for understanding a code library.">
  <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub">

    
  <link rel="assets" href="https://assets-cdn.github.com/">
  
  <meta name="pjax-timeout" content="1000">
  

  <meta class="js-ga-set" name="dimension1" content="Logged Out">


  

      <meta name="hostname" content="github.com">
    <meta name="user-login" content="">

      <meta name="expected-hostname" content="github.com">
    <meta name="js-proxy-site-detection-payload" content="MDJmYjI5Nzg2MGQzZTRmZjliZGIzZjFlNzI3NGI1ZjY1MGUxZTA0MWRhMGQ1ODYxYzgyNzkwMzI5MTA4NzU5Nnx7InJlbW90ZV9hZGRyZXNzIjoiMjA3LjI1MS4xMDMuNDYiLCJyZXF1ZXN0X2lkIjoiQjU5MTo2Q0E3OjkzNzIwNToxMTNFMzZCOjVCMDZENDkzIiwidGltZXN0YW1wIjoxNTI3MTc0Mjk2LCJob3N0IjoiZ2l0aHViLmNvbSJ9">

    <meta name="enabled-features" content="UNIVERSE_BANNER,FREE_TRIALS,MARKETPLACE_INSIGHTS,MARKETPLACE_INSIGHTS_CONVERSION_PERCENTAGES">

  <meta name="html-safe-nonce" content="2fa063f0213bf990359e9bdda16cb64ac9a351a9">

  <meta http-equiv="x-pjax-version" content="51f009f02b8edad03568c47dc796a322">
  

      <link href="https://github.com/Glench/fuzzyset.js/commits/master.atom" rel="alternate" title="Recent Commits to fuzzyset.js:master" type="application/atom+xml">

  <meta name="description" content="fuzzyset.js - A fuzzy string set for javascript">
  <meta name="go-import" content="github.com/Glench/fuzzyset.js git https://github.com/Glench/fuzzyset.js.git">

  <meta name="octolytics-dimension-user_id" content="451461"><meta name="octolytics-dimension-user_login" content="Glench"><meta name="octolytics-dimension-repository_id" content="7334683"><meta name="octolytics-dimension-repository_nwo" content="Glench/fuzzyset.js"><meta name="octolytics-dimension-repository_public" content="true"><meta name="octolytics-dimension-repository_is_fork" content="false"><meta name="octolytics-dimension-repository_network_root_id" content="7334683"><meta name="octolytics-dimension-repository_network_root_nwo" content="Glench/fuzzyset.js"><meta name="octolytics-dimension-repository_explore_github_marketplace_ci_cta_shown" content="false">


    <link rel="canonical" href="https://github.com/Glench/fuzzyset.js" data-pjax-transient="">


  <link rel="mask-icon" href="https://assets-cdn.github.com/pinned-octocat.svg" color="#000000">
  <link rel="icon" type="image/x-icon" class="js-site-favicon" href="https://assets-cdn.github.com/favicon.ico">

<meta name="theme-color" content="#1e2327">


  <meta name="u2f-support" content="true">

  <script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML">
  </script>

  </head>

  <body class="logged-out env-production emoji-size-boost">

    <div id="intro-container">
      <div id="intro">
        <h3>A Human-Readable Interactive Representation of a Code Library</h3>
        <p>When programmers try to understand a program they're presented with a series of files, folders, and hundreds or thousands of lines of text and are forced to reconstruct the program's behavior in their heads. This doesn't feel right to me so I wonder: is it possible to create representations of programs more suited for human understanding in order to ease the task of programming and make it more accessible?</p>

        <p>To answer this question, I created an alternate representation of a JavaScript library I authored called Fuzzyset.js. Despite being only 300 lines of code, I've found that understanding how the library works from reading the code is quite difficult &mdash; sometimes even I can't figure it out!</p>

        <p><b>The interactive document below is an alternate representation of Fuzzyset.js.</b> I created it as an experiment to help me and other programmers understand the internal workings of the library. And I made it look like a page on Github to simulate what it might be like if these kinds of documents were commonly provided with programs.</p>

        <p>To convey how the library works, the document</p>
        <ul style="margin-left: 40px;">
          <li>explains the mathematical foundation the library is based on,</li>
          <li>shows the high-level structure of the library, and</li>
          <li>demonstrates some of the data operations with <b>interactive illustrated examples and live code editing</b>.</li>
        </ul>
        <p>All these features are important, but the interactive features seem particularly useful in letting readers ask questions and test hypotheses to sharpen their mental models of a complex system &mdash; a mode of knowing not supported in typical documentation.</p>

        <p>This document is just one example of a representation of a program, a research project hand-crafted to give it the best possible chance of successfully facilitating understanding. My hope is that this example of a well-explained system will provide clues about how to better represent programs with the possibility that these sorts of human-understandable artifacts can be created automatically as a by-product of authoring programs, or even <em>become the way that programs are created</em>.</p>

        <p>Ultimately, I think programming models and UIs have to change to accomodate human cognition and social processes for dealing with complexity &mdash; once it does, programming will be a lot easier for experts and a lot more accessible to beginners. Until then! &#x1F31F;</p>

        <cite style="display: block; margin: 30px 0 30px 500px; font-style: normal; line-height: 1;">
          <p style="margin-bottom: -7px;"><a style="text-decoration: underline;" href="http://glench.com">Glen Chiacchieri</a></p>
          <p style="margin-bottom: -7px;">July 2018</p>
          <p>created at <a href="https://www.recurse.com/">The Recurse Center</a></p>
        </cite>
        <small>P.S. If you're interested in this kind of thing, you might be interested in my newsletter about <a href="https://tinyletter.com/Flowsheets">The Future of Programming</a> &mdash; it even includes <a href="https://tinyletter.com/Flowsheets/letters/how-fuzzyset-js-works-an-interactive-human-readable-visualization-of-a-code-library">a post with more details about this document</a>.</small>
      </div>
    </div>
    

  <div class="position-relative js-header-wrapper ">
    <a href="https://github.com/Glench/fuzzyset.js#start-of-content" tabindex="1" class="px-2 py-4 bg-blue text-white show-on-focus js-skip-to-content">Skip to content</a>
    <div id="js-pjax-loader-bar" class="pjax-loader-bar"><div class="progress"></div></div>

    
    
    



        <header class="Header header-logged-out  position-relative f4 py-3" role="banner">
  <div class="container-lg d-flex px-3">
    <div class="d-flex flex-justify-between flex-items-center">
      <a class="header-logo-invertocat my-0" href="https://github.com/" aria-label="Homepage" data-ga-click="(Logged out) Header, go to homepage, icon:logo-wordmark">
        <svg height="32" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="32" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg>
      </a>

    </div>

    <div class="HeaderMenu HeaderMenu--bright d-flex flex-justify-between flex-auto">
        <nav class="mt-0">
          <ul class="d-flex list-style-none">
              <li class="ml-2">
                <a class="js-selected-navigation-item HeaderNavlink px-0 py-2 m-0" data-ga-click="Header, click, Nav menu - item:features" data-selected-links="/features /features/project-management /features/code-review /features/project-management /features/integrations /features" href="https://github.com/features">
                  Features
</a>              </li>
              <li class="ml-4">
                <a class="js-selected-navigation-item HeaderNavlink px-0 py-2 m-0" data-ga-click="Header, click, Nav menu - item:business" data-selected-links="/business /business/security /business/customers /business" href="https://github.com/business">
                  Business
</a>              </li>

              <li class="ml-4">
                <a class="js-selected-navigation-item HeaderNavlink px-0 py-2 m-0" data-ga-click="Header, click, Nav menu - item:explore" data-selected-links="/explore /trending /trending/developers /integrations /integrations/feature/code /integrations/feature/collaborate /integrations/feature/ship showcases showcases_search showcases_landing /explore" href="https://github.com/explore">
                  Explore
</a>              </li>

              <li class="ml-4">
                    <a class="js-selected-navigation-item HeaderNavlink px-0 py-2 m-0" data-ga-click="Header, click, Nav menu - item:marketplace" data-selected-links=" /marketplace" href="https://github.com/marketplace">
                      Marketplace
</a>              </li>
              <li class="ml-4">
                <a class="js-selected-navigation-item HeaderNavlink px-0 py-2 m-0" data-ga-click="Header, click, Nav menu - item:pricing" data-selected-links="/pricing /pricing/developer /pricing/team /pricing/business-hosted /pricing/business-enterprise /pricing" href="https://github.com/pricing">
                  Pricing
</a>              </li>
          </ul>
        </nav>

      <div class="d-flex">
          <div class="d-lg-flex flex-items-center mr-3">

          </div>

        <span class="d-inline-block">
            <div class="HeaderNavlink px-0 py-2 m-0">
              <a class="text-bold text-white no-underline" href="https://github.com/login?return_to=%2FGlench%2Ffuzzyset.js" data-ga-click="(Logged out) Header, clicked Sign in, text:sign-in">Sign in</a>
                <span class="text-gray">or</span>
                <a class="text-bold text-white no-underline" href="https://github.com/join?source=header-repo" data-ga-click="(Logged out) Header, clicked Sign up, text:sign-up">Sign up</a>
            </div>
        </span>
      </div>
    </div>
  </div>
</header>

  </div>

  <div id="start-of-content" class="show-on-focus"></div>

    <div id="js-flash-container">
</div>



  <div role="main" class="application-main ">
        <div itemscope="" itemtype="http://schema.org/SoftwareSourceCode" class="">
    <div id="js-repo-pjax-container" data-pjax-container="">
      





  <div class="pagehead repohead instapaper_ignore readability-menu experiment-repo-nav  ">
    <div class="repohead-details-container clearfix container">

      <ul class="pagehead-actions">
  <li>
      <a href="https://github.com/login?return_to=%2FGlench%2Ffuzzyset.js" class="btn btn-sm btn-with-count tooltipped tooltipped-n" aria-label="You must be signed in to watch a repository" rel="nofollow">
    <svg class="octicon octicon-eye" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"></path></svg>
    Watch
  </a>
  <a class="social-count" href="https://github.com/Glench/fuzzyset.js/watchers" aria-label="11 users are watching this repository">
    11
  </a>

  </li>

  <li>
      <a href="https://github.com/login?return_to=%2FGlench%2Ffuzzyset.js" class="btn btn-sm btn-with-count tooltipped tooltipped-n" aria-label="You must be signed in to star a repository" rel="nofollow">
    <svg class="octicon octicon-star" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74L14 6z"></path></svg>
    Star
  </a>

    <a class="social-count js-social-count" href="https://github.com/Glench/fuzzyset.js/stargazers" aria-label="388 users starred this repository">
      388
    </a>

  </li>

  <li>
      <a href="https://github.com/login?return_to=%2FGlench%2Ffuzzyset.js" class="btn btn-sm btn-with-count tooltipped tooltipped-n" aria-label="You must be signed in to fork a repository" rel="nofollow">
        <svg class="octicon octicon-repo-forked" viewBox="0 0 10 16" version="1.1" width="10" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 1a1.993 1.993 0 0 0-1 3.72V6L5 8 3 6V4.72A1.993 1.993 0 0 0 2 1a1.993 1.993 0 0 0-1 3.72V6.5l3 3v1.78A1.993 1.993 0 0 0 5 15a1.993 1.993 0 0 0 1-3.72V9.5l3-3V4.72A1.993 1.993 0 0 0 8 1zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3 10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3-10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
        Fork
      </a>

    <a href="https://github.com/Glench/fuzzyset.js/network" class="social-count" aria-label="45 users forked this repository">
      45
    </a>
  </li>
</ul>

      <h1 class="public ">
  <svg class="octicon octicon-repo" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"></path></svg>
  <span class="author" itemprop="author"><a class="url fn" rel="author" href="https://github.com/Glench">Glench</a></span><!--
--><span class="path-divider">/</span><!--
--><strong itemprop="name"><a data-pjax="#js-repo-pjax-container" href="https://github.com/Glench/fuzzyset.js">fuzzyset.js</a></strong>

</h1>

    </div>
    
<nav class="reponav js-repo-nav js-sidenav-container-pjax container" itemscope="" itemtype="http://schema.org/BreadcrumbList" role="navigation" data-pjax="#js-repo-pjax-container">

  <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement">
    <a class="js-selected-navigation-item selected reponav-item" itemprop="url" data-hotkey="g c" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches repo_packages /Glench/fuzzyset.js" href="https://github.com/Glench/fuzzyset.js">
      <svg class="octicon octicon-code" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z"></path></svg>
      <span itemprop="name">Code</span>
      <meta itemprop="position" content="1">
</a>  </span>

    <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement">
      <a itemprop="url" data-hotkey="g i" class="js-selected-navigation-item reponav-item" data-selected-links="repo_issues repo_labels repo_milestones /Glench/fuzzyset.js/issues" href="https://github.com/Glench/fuzzyset.js/issues">
        <svg class="octicon octicon-issue-opened" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
        <span itemprop="name">Issues</span>
        <span class="Counter">1</span>
        <meta itemprop="position" content="2">
</a>    </span>

  <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement">
    <a data-hotkey="g p" itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="repo_pulls checks /Glench/fuzzyset.js/pulls" href="https://github.com/Glench/fuzzyset.js/pulls">
      <svg class="octicon octicon-git-pull-request" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
      <span itemprop="name">Pull requests</span>
      <span class="Counter">0</span>
      <meta itemprop="position" content="3">
</a>  </span>

    <a data-hotkey="g b" class="js-selected-navigation-item reponav-item" data-selected-links="repo_projects new_repo_project repo_project /Glench/fuzzyset.js/projects" href="https://github.com/Glench/fuzzyset.js/projects">
      <svg class="octicon octicon-project" viewBox="0 0 15 16" version="1.1" width="15" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1z"></path></svg>
      Projects
      <span class="Counter">0</span>
</a>


  <a class="js-selected-navigation-item reponav-item" data-selected-links="repo_graphs repo_contributors dependency_graph pulse /Glench/fuzzyset.js/pulse" href="https://github.com/Glench/fuzzyset.js/pulse">
    <svg class="octicon octicon-graph" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M16 14v1H0V0h1v14h15zM5 13H3V8h2v5zm4 0H7V3h2v10zm4 0h-2V6h2v7z"></path></svg>
    Insights
</a>

</nav>


  </div>

<div class="container new-discussion-timeline experiment-repo-nav  ">
  <div class="repository-content ">

    
  

  <div class="js-repo-meta-container">
  <div class="repository-meta mb-0 mb-3 js-repo-meta-edit js-details-container ">
    <div class="repository-meta-content col-11 mb-1">
          <span class="col-11 text-gray-dark mr-2" itemprop="about">
            fuzzyset.js - A fuzzy string set for javascript
          </span>
          <span itemprop="url"><a rel="nofollow" href="http://glench.github.com/fuzzyset.js/">http://glench.github.com/fuzzyset.js/</a></span>
    </div>

  </div>

</div>



  <div class="overall-summary overall-summary-bottomless">
    <div class="stats-switcher-viewport js-stats-switcher-viewport">
      <div class="stats-switcher-wrapper">
      <ul class="numbers-summary">
        <li class="commits">
          <a data-pjax="" href="https://github.com/Glench/fuzzyset.js/commits/master">
              <svg class="octicon octicon-history" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 13H6V6h5v2H8v5zM7 1C4.81 1 2.87 2.02 1.59 3.59L0 2v4h4L2.5 4.5C3.55 3.17 5.17 2.3 7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-.34.03-.67.09-1H.08C.03 7.33 0 7.66 0 8c0 3.86 3.14 7 7 7s7-3.14 7-7-3.14-7-7-7z"></path></svg>
              <span class="num text-emphasized">
                33
              </span>
              commits
          </a>
        </li>
        <li>
          <a data-pjax="" href="https://github.com/Glench/fuzzyset.js/branches">
            <svg class="octicon octicon-git-branch" viewBox="0 0 10 16" version="1.1" width="10" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M10 5c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v.3c-.02.52-.23.98-.63 1.38-.4.4-.86.61-1.38.63-.83.02-1.48.16-2 .45V4.72a1.993 1.993 0 0 0-1-3.72C.88 1 0 1.89 0 3a2 2 0 0 0 1 1.72v6.56c-.59.35-1 .99-1 1.72 0 1.11.89 2 2 2 1.11 0 2-.89 2-2 0-.53-.2-1-.53-1.36.09-.06.48-.41.59-.47.25-.11.56-.17.94-.17 1.05-.05 1.95-.45 2.75-1.25S8.95 7.77 9 6.73h-.02C9.59 6.37 10 5.73 10 5zM2 1.8c.66 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2C1.35 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2zm0 12.41c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm6-8c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
            <span class="num text-emphasized">
              2
            </span>
            branches
          </a>
        </li>

        <li>
          <a href="https://github.com/Glench/fuzzyset.js/releases">
            <svg class="octicon octicon-tag" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.685 1.72a2.49 2.49 0 0 0-1.76-.726H3.48A2.5 2.5 0 0 0 .994 3.48v2.456c0 .656.269 1.292.726 1.76l6.024 6.024a.99.99 0 0 0 1.402 0l4.563-4.563a.99.99 0 0 0 0-1.402L7.685 1.72zM2.366 7.048A1.54 1.54 0 0 1 1.9 5.925V3.48c0-.874.716-1.58 1.58-1.58h2.456c.418 0 .825.159 1.123.467l6.104 6.094-4.702 4.702-6.094-6.114zm.626-4.066h1.989v1.989H2.982V2.982h.01z"></path></svg>
            <span class="num text-emphasized">
              0
            </span>
            releases
          </a>
        </li>

        <li>
            <a href="https://github.com/Glench/fuzzyset.js/graphs/contributors">
  <svg class="octicon octicon-organization" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M16 12.999c0 .439-.45 1-1 1H7.995c-.539 0-.994-.447-.995-.999H1c-.54 0-1-.561-1-1 0-2.634 3-4 3-4s.229-.409 0-1c-.841-.621-1.058-.59-1-3 .058-2.419 1.367-3 2.5-3s2.442.58 2.5 3c.058 2.41-.159 2.379-1 3-.229.59 0 1 0 1s1.549.711 2.42 2.088C9.196 9.369 10 8.999 10 8.999s.229-.409 0-1c-.841-.62-1.058-.59-1-3 .058-2.419 1.367-3 2.5-3s2.437.581 2.495 3c.059 2.41-.158 2.38-1 3-.229.59 0 1 0 1s3.005 1.366 3.005 4z"></path></svg>
    <span class="num text-emphasized">
      4
    </span>
    contributors
</a>

        </li>
      </ul>

        <div class="repository-lang-stats">
          <ol class="repository-lang-stats-numbers">
            <li>
                <a href="https://github.com/Glench/fuzzyset.js/search?l=javascript" data-ga-click="Repository, language stats search click, location:repo overview">
                  <span class="color-block language-color" style="background-color:#f1e05a;"></span>
                  <span class="lang">JavaScript</span>
                  <span class="percent">100.0%</span>
                </a>
            </li>
          </ol>
        </div>
      </div>
    </div>
  </div>

    <div class="repository-lang-stats-graph js-toggle-lang-stats" title="Click for language details" data-ga-click="Repository, language bar stats toggle, location:repo overview">
      <span class="language-color" aria-label="JavaScript 100.0%" style="width:100.0%; background-color:#f1e05a;" itemprop="keywords">JavaScript</span>
    </div>



  <div class="file-navigation in-mid-page d-flex flex-items-start">
  
<div class="select-menu branch-select-menu js-menu-container js-select-menu float-left">
  <button class=" btn btn-sm select-menu-button js-menu-target css-truncate" data-hotkey="w" type="button" aria-label="Switch branches or tags" aria-expanded="false" aria-haspopup="true">
      <i>Branch:</i>
      <span class="js-select-button css-truncate-target">master</span>
  </button>

  <div class="select-menu-modal-holder js-menu-content js-navigation-container" data-pjax="">

    <div class="select-menu-modal">
      <div class="select-menu-header">
        <svg class="octicon octicon-x js-menu-close" role="img" aria-label="Close" viewBox="0 0 12 16" version="1.1" width="12" height="16"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"></path></svg>
        <span class="select-menu-title">Switch branches/tags</span>
      </div>

      <div class="select-menu-filters">
        <div class="select-menu-text-filter">
          <input type="text" aria-label="Filter branches/tags" id="context-commitish-filter-field" class="form-control js-filterable-field js-navigation-enable" placeholder="Filter branches/tags">
        </div>
        <div class="select-menu-tabs">
          <ul>
            <li class="select-menu-tab">
              <a href="https://github.com/Glench/fuzzyset.js#" data-tab-filter="branches" data-filter-placeholder="Filter branches/tags" class="js-select-menu-tab" role="tab">Branches</a>
            </li>
            <li class="select-menu-tab">
              <a href="https://github.com/Glench/fuzzyset.js#" data-tab-filter="tags" data-filter-placeholder="Find a tag…" class="js-select-menu-tab" role="tab">Tags</a>
            </li>
          </ul>
        </div>
      </div>

      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="branches" role="menu">

        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


            <a class="select-menu-item js-navigation-item js-navigation-open " href="https://github.com/Glench/fuzzyset.js/tree/gh-pages" data-name="gh-pages" data-skip-pjax="true" rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"></path></svg>
              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text">
                gh-pages
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open selected" href="https://github.com/Glench/fuzzyset.js/tree/master" data-name="master" data-skip-pjax="true" rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"></path></svg>
              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text">
                master
              </span>
            </a>
        </div>

          <div class="select-menu-no-results">Nothing to show</div>
      </div>

      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="tags">
        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


        </div>

        <div class="select-menu-no-results">Nothing to show</div>
      </div>

    </div>
  </div>
</div>


        <button type="button" class="btn btn-sm disabled tooltipped tooltipped-n new-pull-request-btn" aria-label="You must be signed in to create a pull request">
          New pull request
        </button>

  <div class="breadcrumb flex-auto">
    
  </div>

  <div class="BtnGroup">

    <a href="https://github.com/Glench/fuzzyset.js/find/master" class="btn btn-sm empty-icon float-right BtnGroup-item" data-pjax="" data-hotkey="t" data-ga-click="Repository, find file, location:repo overview">
      Find file
    </a>
  </div>
  

    <details class="get-repo-select-menu js-get-repo-select-menu position-relative details-expanded details-reset">
  <summary class="btn btn-sm btn-primary">
    Clone or download
    <span class="dropdown-caret"></span>
  </summary>
  <div class="position-relative">
    <div class="get-repo-modal dropdown-menu dropdown-menu-sw pb-0 js-toggler-container  js-get-repo-modal">

      <div class="get-repo-modal-options">
          <div class="clone-options https-clone-options">

            <h4 class="mb-1">
              Clone with HTTPS
              <a class="muted-link" href="https://help.github.com/articles/which-remote-url-should-i-use" target="_blank" title="Which remote URL should I use?">
                <svg class="octicon octicon-question" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M6 10h2v2H6v-2zm4-3.5C10 8.64 8 9 8 9H6c0-.55.45-1 1-1h.5c.28 0 .5-.22.5-.5v-1c0-.28-.22-.5-.5-.5h-1c-.28 0-.5.22-.5.5V7H4c0-1.5 1.5-3 3-3s3 1 3 2.5zM7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7z"></path></svg>
              </a>
            </h4>
            <p class="mb-2 get-repo-decription-text">
              Use Git or checkout with SVN using the web URL.
            </p>

            <div class="input-group">
  <input type="text" class="form-control input-monospace input-sm js-url-field" value="https://github.com/Glench/fuzzyset.js.git" aria-label="Clone this repository at https://github.com/Glench/fuzzyset.js.git" readonly="">
  <div class="input-group-button">
    <clipboard-copy value="https://github.com/Glench/fuzzyset.js.git" aria-label="Copy to clipboard" class="btn btn-sm" tabindex="0" role="button">
      <svg class="octicon octicon-clippy" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M2 13h4v1H2v-1zm5-6H2v1h5V7zm2 3V8l-3 3 3 3v-2h5v-2H9zM4.5 9H2v1h2.5V9zM2 12h2.5v-1H2v1zm9 1h1v2c-.02.28-.11.52-.3.7-.19.18-.42.28-.7.3H1c-.55 0-1-.45-1-1V4c0-.55.45-1 1-1h3c0-1.11.89-2 2-2 1.11 0 2 .89 2 2h3c.55 0 1 .45 1 1v5h-1V6H1v9h10v-2zM2 5h8c0-.55-.45-1-1-1H8c-.55 0-1-.45-1-1s-.45-1-1-1-1 .45-1 1-.45 1-1 1H3c-.55 0-1 .45-1 1z"></path></svg>
    </clipboard-copy>
  </div>
</div>

          </div>

        <div class="mt-2">
            <a href="https://desktop.github.com/" class="btn btn-outline get-repo-btn tooltipped tooltipped-s tooltipped-multiline js-get-repo" data-open-app="mac" aria-label="Clone Glench/fuzzyset.js to your computer and use it in GitHub Desktop.">
    Open in Desktop
  </a>

<a href="https://github.com/Glench/fuzzyset.js/archive/master.zip" class="btn btn-outline get-repo-btn
" rel="nofollow" data-ga-click="Repository, download zip, location:repo overview">
  Download ZIP
</a>

        </div>
      </div>

      <div class="js-modal-download-mac py-2 px-3 d-none">
        <h4 class="lh-condensed mb-3">Launching GitHub Desktop<span class="animated-ellipsis-container"><span class="animated-ellipsis">...</span></span></h4>
        <p class="text-gray">If nothing happens, <a href="https://desktop.github.com/">download GitHub Desktop</a> and try again.</p>
        <p><button class="btn-link js-get-repo-modal-download-back">Go back</button></p>
      </div>

      <div class="js-modal-download-windows py-2 px-3 d-none">
        <h4 class="lh-condensed mb-3">Launching GitHub Desktop<span class="animated-ellipsis-container"><span class="animated-ellipsis">...</span></span></h4>
        <p class="text-gray">If nothing happens, <a href="https://desktop.github.com/">download GitHub Desktop</a> and try again.</p>
        <p><button class="btn-link js-get-repo-modal-download-back">Go back</button></p>
      </div>

      <div class="js-modal-download-xcode py-2 px-3 d-none">
        <h4 class="lh-condensed mb-3">Launching Xcode<span class="animated-ellipsis-container"><span class="animated-ellipsis">...</span></span></h4>
        <p class="text-gray">If nothing happens, <a href="https://developer.apple.com/xcode/">download Xcode</a> and try again.</p>
        <p><button class="btn-link js-get-repo-modal-download-back">Go back</button></p>
      </div>

      <div class="js-modal-download-visual-studio py-2 px-3 d-none">
        <h4 class="lh-condensed mb-3">Launching Visual Studio<span class="animated-ellipsis-container"><span class="animated-ellipsis">...</span></span></h4>
        <p class="text-gray">If nothing happens, <a href="https://visualstudio.github.com/">download the GitHub extension for Visual Studio</a> and try again.</p>
        <p><button class="btn-link js-get-repo-modal-download-back">Go back</button></p>
      </div>

    </div>
  </div>
</details>

</div>


  


  <div class="commit-tease js-details-container Details d-flex">
    
<div class="AvatarStack flex-self-start ">
  <div class="AvatarStack-body" aria-label="Glench">

        <a class="avatar" data-skip-pjax="true" data-hovercard-user-id="451461" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="https://github.com/Glench" aria-describedby="hovercard-aria-description">
          <img height="20" width="20" alt="@Glench" src="./ui_files/451461">
</a>  </div>
</div>

    <div class="flex-auto f6 no-wrap mr-3">
      
      <a href="https://github.com/Glench/fuzzyset.js/commits?author=Glench" class="commit-author tooltipped tooltipped-s user-mention" aria-label="View all commits by Glench">Glench</a>


  


        <a data-pjax="true" title="Merge branch &#39;master&#39; of github.com:Glench/fuzzyset.js" class="message" href="https://github.com/Glench/fuzzyset.js/commit/60566a70f7f6dcdf971320dc9696088420902343">Merge branch 'master' of github.com:Glench/fuzzyset.js</a>

    </div>
    <div class="no-wrap">
      Latest commit
      <a class="commit-tease-sha" href="https://github.com/Glench/fuzzyset.js/commit/60566a70f7f6dcdf971320dc9696088420902343" data-pjax="">
        60566a7
      </a>
      <span itemprop="dateModified"><relative-time datetime="2017-09-21T21:09:42Z" title="Sep 21, 2017, 5:09 PM EDT">on Sep 21, 2017</relative-time></span>
    </div>
  </div>



<div class="file-wrap">

  <a class="d-none js-permalink-shortcut" data-hotkey="y" href="https://github.com/Glench/fuzzyset.js/tree/60566a70f7f6dcdf971320dc9696088420902343">Permalink</a>

  <table class="files js-navigation-container js-active-navigation-container" data-pjax="">


    <tbody>
      <tr class="warning include-fragment-error">
        <td class="icon"><svg class="octicon octicon-alert" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></td>
        <td class="content" colspan="3">Failed to load latest commit information.</td>
      </tr>

        <tr class="js-navigation-item navigation-focus">
          <td class="icon">
            <svg class="octicon octicon-file-directory" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M13 4H7V3c0-.66-.31-1-1-1H1c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V5c0-.55-.45-1-1-1zM6 4H1V3h5v1z"></path></svg>
            <img width="16" height="16" class="spinner" alt="" src="./ui_files/octocat-spinner-32.gif">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a class="js-navigation-open" title="lib" id="e8acc63b1e238f3255c900eed37254b8-72a4a5e74726e0a941a98fb3fc46b698200ca7d1" href="https://github.com/Glench/fuzzyset.js/tree/master/lib">lib</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
                  <a data-pjax="true" title="better string normalization" class="message" href="https://github.com/Glench/fuzzyset.js/commit/4fb0a09a530d064463c11987a964c28b0a483aa0">better string normalization</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time-ago datetime="2017-09-21T21:01:01Z" title="Sep 21, 2017, 5:01 PM EDT">8 months ago</time-ago></span>
          </td>
        </tr>
        <tr class="js-navigation-item">
          <td class="icon">
            <svg class="octicon octicon-file" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z"></path></svg>
            <img width="16" height="16" class="spinner" alt="" src="./ui_files/octocat-spinner-32.gif">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a class="js-navigation-open" title=".npmignore" id="0fd4ef892d9d4990033701887c2f9bcc-bde8e36dd4fa9d88792438d9c38582a2042ffb98" href="https://github.com/Glench/fuzzyset.js/blob/master/.npmignore">.npmignore</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
                  <a data-pjax="true" title="update for node/npm" class="message" href="https://github.com/Glench/fuzzyset.js/commit/6457869e7c4fbd789c18eb837f1aa24bf7041323">update for node/npm</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time-ago datetime="2012-12-27T19:03:39Z" title="Dec 27, 2012, 2:03 PM EST">6 years ago</time-ago></span>
          </td>
        </tr>
        <tr class="js-navigation-item">
          <td class="icon">
            <svg class="octicon octicon-file" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z"></path></svg>
            <img width="16" height="16" class="spinner" alt="" src="./ui_files/octocat-spinner-32.gif">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a class="js-navigation-open" title="README.rst" id="88b99bb28683bd5b7e3a204826ead112-e6a1b3121dc62030126ab74df5d77318450b8021" href="https://github.com/Glench/fuzzyset.js/blob/master/README.rst">README.rst</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
                  <a data-pjax="true" title="Update README.rst" class="message" href="https://github.com/Glench/fuzzyset.js/commit/62566aab28c76f4023c4be062ec3a5e4e7d4f5fd">Update README.rst</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time-ago datetime="2017-08-04T20:02:41Z" title="Aug 4, 2017, 4:02 PM EDT">10 months ago</time-ago></span>
          </td>
        </tr>
        <tr class="js-navigation-item">
          <td class="icon">
            <svg class="octicon octicon-file" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z"></path></svg>
            <img width="16" height="16" class="spinner" alt="" src="./ui_files/octocat-spinner-32.gif">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a class="js-navigation-open" title="index.js" id="168726dbe96b3ce427e7fedce31bb0bc-2d2c17aa4ed04e2f0ce794c4df94afee0d0c5bd4" href="https://github.com/Glench/fuzzyset.js/blob/master/index.js">index.js</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
                  <a data-pjax="true" title="update for node/npm" class="message" href="https://github.com/Glench/fuzzyset.js/commit/6457869e7c4fbd789c18eb837f1aa24bf7041323">update for node/npm</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time-ago datetime="2012-12-27T19:03:39Z" title="Dec 27, 2012, 2:03 PM EST">6 years ago</time-ago></span>
          </td>
        </tr>
        <tr class="js-navigation-item">
          <td class="icon">
            <svg class="octicon octicon-file" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z"></path></svg>
            <img width="16" height="16" class="spinner" alt="" src="./ui_files/octocat-spinner-32.gif">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a class="js-navigation-open" title="package.json" id="b9cfc7f2cdf78a7f4b91a753d10865a2-89fd3106d55445795244c4099362ddf4db599104" href="https://github.com/Glench/fuzzyset.js/blob/master/package.json">package.json</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
                  <a data-pjax="true" title="better string normalization" class="message" href="https://github.com/Glench/fuzzyset.js/commit/4fb0a09a530d064463c11987a964c28b0a483aa0">better string normalization</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time-ago datetime="2017-09-21T21:01:01Z" title="Sep 21, 2017, 5:01 PM EDT">8 months ago</time-ago></span>
          </td>
        </tr>
        <tr class="js-navigation-item">
          <td class="icon">
            <svg class="octicon octicon-file" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z"></path></svg>
            <img width="16" height="16" class="spinner" alt="" src="./ui_files/octocat-spinner-32.gif">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a class="js-navigation-open" title="How it works.html" id="88b99bb28683bd5b7e3a204826ead112-e6a1b3121dc62030126ab74df5d77318450b8021" style="font-weight: bold">How it works.html</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
                  <a data-pjax="true" title="" class="message">Added "how it works"</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time-ago datetime="2018-06-01T20:02:41Z" title="June 2018">June 2018</time-ago></span>
          </td>
        </tr>
    </tbody>
  </table>

</div>



  <div id="readme" class="readme boxed-group clearfix announce instapaper_body rst">
    <h3>
      <svg class="octicon octicon-book" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M3 5h4v1H3V5zm0 3h4V7H3v1zm0 2h4V9H3v1zm11-5h-4v1h4V5zm0 2h-4v1h4V7zm0 2h-4v1h4V9zm2-6v9c0 .55-.45 1-1 1H9.5l-1 1-1-1H2c-.55 0-1-.45-1-1V3c0-.55.45-1 1-1h5.5l1 1 1-1H15c.55 0 1 .45 1 1zm-8 .5L7.5 3H2v9h6V3.5zm7-.5H9.5l-.5.5V12h6V3z"></path></svg>
      How it works.html
    </h3>

      <article class="markdown-body entry-content" itemprop="text" id="starting">
        <h1>What it does</h1>

          <p>Fuzzyset.js creates a data structure to efficiently compute similarity scores in order to find likely misspellings in user input.</p>
          <p> For example, if someone types <b>"mossisippi"</b> in a U.S. state input box, we would use this library to infer that they probably meant <b>"Mississippi"</b>. Here's a simple interactive example:</p>

          <div class="fuzzyset-wide">
            <div id="fuzzyset-starting-example">
              Uh oh, there was an error. Do you have JavaScript enabled?
            </div>
          </div>


        <h1>How it works</h1>

        <p>The basic idea is to compare a search against potential matches in the dictionary and order the matches by a similarity score.</p>

        <p>The library's functionality can be broken down into three parts:</p>

          <ol>
            <li><b>Calculating Similarity Scores</b> &mdash; how do we figure out how "similar" two strings are?</li>
            <li><b>Storing the Dictionary</b> &mdash; how do we use the similarity score to store the dictionary efficiently?</li>
            <li><b>Looking up Matches</b> &mdash; how do we look up potential matches in that dictionary?</li>
          </ol>


        <h1>Calculating Similarity Scores</h1>

          <p>First, to find misspellings we want to have a way to compare strings. How do we know how similar two strings are? In this case, we can compute a "similarity score" from 0 (not similar at all) to 1 (completely similar, the same string).</p>

          <p>The formula for <a href="https://en.wikipedia.org/wiki/Cosine_similarity">cosine similarity</a> gives us a score from 0 to 1, but to use it we have to turn strings in numeric vectors. How do we do that?</p>

          <p>
            To turn a string into numeric vector, we use the <code>_gramCounter</code> function which counts the character substrings ("grams") in a given string:
          </p>

          <script id="gramCounter">_nonWordRe = /[^a-zA-Z0-9\u00C0-\u00FF\u0621-\u064A\u0660-\u0669, ]+/g;
_iterateGrams = function(value, gramSize) {
    gramSize = gramSize || 2;
    var simplified = '-' + value.toLowerCase().replace(_nonWordRe, '') + '-',
        lenDiff = gramSize - simplified.length,
        results = [];
    if (lenDiff > 0) {
        for (var i = 0; i < lenDiff; ++i) {
            value += '-';
        }
    }
    for (var i = 0; i < simplified.length - gramSize + 1; ++i) {
        results.push(simplified.slice(i, i + gramSize));
    }
    return results;
};

_gramCounter = function(value, gramSize) {
    // return an object where key=gram, value=number of occurrences
    gramSize = gramSize || 2;
    var result = {},
        grams = _iterateGrams(value, gramSize),
        i = 0;
    for (i; i < grams.length; ++i) {
        if (grams[i] in result) {
            result[grams[i]] += 1;
        } else {
            result[grams[i]] = 1;
        }
    }
    return result;
};</script>

          <div id="fuzzyset-vectorize" class="fuzzyset-wide">
            Uh oh, there was an error. Do you have JavaScript enabled?
          </div>

          <p>Now that we have a way to turn strings into vectors, we can use cosine similarity to get a score between 0 and 1.</p>

          <p>The formula for cosine similarity is:</p>

          <p style="text-align: center;">$$\frac{A \cdot B}{\left\lVert A \right\rVert \left\lVert B \right\rVert}$$</p>
          <div class="fuzzyset-math" style="position: relative; margin-top: -66px; margin-left: 555px; font-size: 13px;">
            <p>where \(A\) and \(B\) are vectors (as shown above),</p>
            <p>\(A \cdot B\) is the dot product of those vectors,</p>
            <p>and \(\left\lVert A \right\rVert\) is the vector magnitude of \(A\).</p>
          </div>

          <p style="margin: 30px 0;">To calculate the dot product, \(A \cdot B\), we just multiply the parts of each vector together and add them up:</p>

          <div id="fuzzyset-cosinesimilarity">
            Uh oh, there was an error. Do you have JavaScript enabled?
          </div>

          <p>And that is how Fuzzyset.js calculates a similarity score for two strings. Perfect matches have a score of 1, and completely dissimilar matches have a score of 0. Try it out!</p>

          <h1>Storing the Dictionary</h1>

          <p>We want to use the formula described above to match a dictionary of strings. To store strings efficiently so they can be later compared using cosine similarity, we use the following strategy:</p>

          <p style="text-align: center;"><img src="storage.png" alt="Annotated cosine similarity equation showing the storage of the vector parts in fuzzyset.matchDict and the vector magnitude in fuzzyset.items." /><small style="display: block;">(\(A \cdot B\) and \(\left\lVert A \right\rVert\) will be calculated on-the-fly when looking up matches.)</small></p>

          <p>Here's what that looks like in practice:</p>

          <script>fuzzyset = {gramSizeLower: 2, gramSizeUpper: 2, matchDict: {}, items: {}, exactSet: {}};</script>
          <script id="fuzzyset-add">fuzzyset.add = function(value) {
    var normalizedValue = this._normalizeStr(value);
    if (normalizedValue in this.exactSet) {
        return false;
    }

    var i = this.gramSizeLower;
    for (i; i < this.gramSizeUpper + 1; ++i) {
        this._add(value, i);
    }
};

fuzzyset._add = function(value, gramSize) {
    var normalizedValue = this._normalizeStr(value),
        items = this.items[gramSize] || [],
        index = items.length;

    items.push(0);
    var gramCounts = _gramCounter(normalizedValue, gramSize),
        sumOfSquareGramCounts = 0,
        gram, gramCount;
    for (gram in gramCounts) {
        gramCount = gramCounts[gram];
        sumOfSquareGramCounts += Math.pow(gramCount, 2);
        if (gram in this.matchDict) {
            this.matchDict[gram].push([index, gramCount]);
        } else {
            this.matchDict[gram] = [[index, gramCount]];
        }
    }
    var vectorNormal = Math.sqrt(sumOfSquareGramCounts);
    items[index] = [vectorNormal, normalizedValue];
    this.items[gramSize] = items;
    this.exactSet[normalizedValue] = value;
};

fuzzyset._normalizeStr = function(str) {
    if (Object.prototype.toString.call(str) !== '[object String]') {
     throw 'Must use a string as argument to FuzzySet functions';
    }
    return str.toLowerCase();
};
          </script>
          <div class="fuzzyset-wide" style="padding-top: 1px">
            <h3 style="margin-bottom: 0;">How Fuzzyset stores strings</h3>
            <div id="fuzzyset-storage">
              Uh oh, there was an error. Do you have JavaScript enabled?
            </div>

          </div>


          <h1>Looking Up Matches</h1>

          <p>The algorithm for looking up matches is as follows:</p>

          <ol>
            <li>Starting with <code>gramSizeUpper</code>, look up potential matches with at least one gram in common (a dictionary lookup in <code>fuzzyset.matchDict</code>), calculate the cosine similarity between the lookup string and the match, and sort the results by that score. Return all results with scores above the <code>minMatchScore</code>.</li>
            <li>If <code>useLevenshtein</code> is <code>true</code>, compute the <a href="https://en.wikipedia.org/wiki/Levenshtein_distance">Levenshtein distance</a> for the top 50 matching strings and return those results sorted by Levenshtein distance with scores above the <code>minMatchScore</code>. (Levenshtein distance is useful for finding misspellings where letters are out of order.)</li>
            <li>If no results were found for steps 2 or 3, try again with the next largest gram size. (Lower gram sizes will generally create more matches of lower similarity.) Keep trying with lower gram sizes until results are found or <code>gramSizeLower</code> is reached.</li>
          </ol>

          <p>Here's how this looks in practice:</p>

<script id="lookup">// helper functions
var levenshtein = function(str1, str2) {
    var current = [], prev, value;

    for (var i = 0; i <= str2.length; i++)
        for (var j = 0; j <= str1.length; j++) {
        if (i && j)
            if (str1.charAt(j - 1) === str2.charAt(i - 1))
            value = prev;
            else
            value = Math.min(current[j], current[j - 1], prev) + 1;
        else
            value = i + j;

        prev = current[j];
        current[j] = value;
        }

    return current.pop();
};

// return an edit distance from 0 to 1
var _distance = function(str1, str2) {
    if (str1 === null && str2 === null) throw 'Trying to compare two null values';
    if (str1 === null || str2 === null) return 0;
    str1 = String(str1); str2 = String(str2);

    var distance = levenshtein(str1, str2);
    if (str1.length > str2.length) {
        return 1 - distance / str1.length;
    } else {
        return 1 - distance / str2.length;
    }
};

// main lookup function
fuzzyset.get = function(value, defaultValue, minMatchScore) {
    // check for value in set, returning defaultValue or null if none found
    if (minMatchScore === undefined) {
        minMatchScore = .33
    }
    var result = this._get(value, minMatchScore);
    if (!result && typeof defaultValue !== 'undefined') {
        return defaultValue;
    }
    return result;
};

fuzzyset._get = function(value, minMatchScore) {
    var results = [];
    // start with high gram size and if there are no results, go to lower gram sizes
    for (var gramSize = this.gramSizeUpper; gramSize >= this.gramSizeLower; --gramSize) {
        results = this.__get(value, gramSize, minMatchScore);
        if (results && results.length > 0) {
            return results;
        }
    }
    return null;
};

fuzzyset.__get = function(value, gramSize, minMatchScore) {
    var normalizedValue = this._normalizeStr(value),
        matches = {},
        gramCounts = _gramCounter(normalizedValue, gramSize),
        items = this.items[gramSize],
        sumOfSquareGramCounts = 0,
        gram,
        gramCount,
        i,
        index,
        otherGramCount;

    for (gram in gramCounts) {
        gramCount = gramCounts[gram];
        sumOfSquareGramCounts += Math.pow(gramCount, 2);
        if (gram in this.matchDict) {
            for (i = 0; i < this.matchDict[gram].length; ++i) {
                index = this.matchDict[gram][i][0];
                otherGramCount = this.matchDict[gram][i][1];
                if (index in matches) {
                    matches[index] += gramCount * otherGramCount;
                } else {
                    matches[index] = gramCount * otherGramCount;
                }
            }
        }
    }

    function isEmptyObject(obj) {
        for(var prop in obj) {
            if(obj.hasOwnProperty(prop))
                return false;
        }
        return true;
    }

    if (isEmptyObject(matches)) {
        return null;
    }

    var vectorNormal = Math.sqrt(sumOfSquareGramCounts),
        results = [],
        matchScore;
    // build a results list of [score, str]
    for (var matchIndex in matches) {
        matchScore = matches[matchIndex];
        results.push([matchScore / (vectorNormal * items[matchIndex][0]), items[matchIndex][1]]);
    }
    var sortDescending = function(a, b) {
        if (a[0] < b[0]) {
            return 1;
        } else if (a[0] > b[0]) {
            return -1;
        } else {
            return 0;
        }
    };
    results.sort(sortDescending);
    if (this.useLevenshtein) {
        var newResults = [],
            endIndex = Math.min(50, results.length);
        // truncate somewhat arbitrarily to 50
        for (var i = 0; i < endIndex; ++i) {
            newResults.push([_distance(results[i][1], normalizedValue), results[i][1]]);
        }
        results = newResults;
        results.sort(sortDescending);
    }
    var newResults = [];
    results.forEach(function(scoreWordPair) {
        if (scoreWordPair[0] >= minMatchScore) {
            newResults.push([scoreWordPair[0], this.exactSet[scoreWordPair[1]]]);
        }
    }.bind(this))
    return newResults;
};</script>
          <div class="fuzzyset-wide" style="padding-top: 1px">
            <div id="fuzzyset-lookup" style="padding-bottom: 20px">
              Uh oh, there was an error. Do you have JavaScript enabled?
            </div>
          </div>

          <p>Try playing around with the different parameters to see how it affects the quality of matches. For example, the <code>useLevenshtein</code> parameter does not provide good matches if a user hasn't typed out a whole word yet.</p>

          <p>And that's basically the whole library! We store strings so they can be looked up quickly and compared using cosine similarity.</p>

      </article>
      <div id="fuzzyend" style="padding: 20px 100px 20px 40px;">
          <h1>Future Directions</h1>

          <p>Programming is hard &mdash; it's hard for beginners to create and understand programs which makes programming as an expressive medium inaccessible. It's hard for experts &mdash; even I (the library's maintainer!) had difficulty understanding Fuzzyset, fixing bugs, and adding features. Programming is not just hard, but in my opinion it's needlessly hard, creating suffering where none should exist.</p>

          <p>I believe much of the reason programming is hard is because so far it hasn't been crafted with an eye toward human understanding, the main bottleneck for both beginners and experts. What would it look like to create programming artifacts and systems that are optimized to be understood?</p>

          <p>My strategy is to start small. Can we create even one example of a well-explained system? How about a couple? What can we start to learn from those examples, and how can we bring those insights into the programming environment itself, so authors are assisted as they create their programs?</p>

          <p>I don't know the answers to those questions, but I'm excited to find out.</p>
          <hr />
          <p>Thanks to <a href="http://geoffreylitt.com/">Geoffrey Litt</a> for helpful comments on drafts of this document.</p>
        </div>

  </div>


  </div>
  <div class="modal-backdrop js-touch-events"></div>
</div>

    </div>
  </div>

  </div>

      
<div class="footer container-lg px-3" role="contentinfo">
  <div class="position-relative d-flex flex-justify-between pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <ul class="list-style-none d-flex flex-wrap ">
      <li class="mr-3">© 2018 <span title="0.20869s from unicorn-6577b75449-hlf9r">GitHub</span>, Inc.</li>
        <li class="mr-3"><a data-ga-click="Footer, go to terms, text:terms" href="https://github.com/site/terms">Terms</a></li>
        <li class="mr-3"><a data-ga-click="Footer, go to privacy, text:privacy" href="https://github.com/site/privacy">Privacy</a></li>
        <li class="mr-3"><a href="https://help.github.com/articles/github-security/" data-ga-click="Footer, go to security, text:security">Security</a></li>
        <li class="mr-3"><a href="https://status.github.com/" data-ga-click="Footer, go to status, text:status">Status</a></li>
        <li><a data-ga-click="Footer, go to help, text:help" href="https://help.github.com/">Help</a></li>
    </ul>

    <a aria-label="Homepage" title="GitHub" class="footer-octicon" href="https://github.com/">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg>
</a>
   <ul class="list-style-none d-flex flex-wrap ">
        <li class="mr-3"><a data-ga-click="Footer, go to contact, text:contact" href="https://github.com/contact">Contact GitHub</a></li>
      <li class="mr-3"><a href="https://developer.github.com/" data-ga-click="Footer, go to api, text:api">API</a></li>
      <li class="mr-3"><a href="https://training.github.com/" data-ga-click="Footer, go to training, text:training">Training</a></li>
      <li class="mr-3"><a href="https://shop.github.com/" data-ga-click="Footer, go to shop, text:shop">Shop</a></li>
        <li class="mr-3"><a href="https://blog.github.com/" data-ga-click="Footer, go to blog, text:blog">Blog</a></li>
        <li><a data-ga-click="Footer, go to about, text:about" href="https://github.com/about">About</a></li>

    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>
</div>



  <div id="ajax-error-message" class="ajax-error-message flash flash-error">
    <svg class="octicon octicon-alert" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg>
    <button type="button" class="flash-close js-ajax-error-dismiss" aria-label="Dismiss error">
      <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"></path></svg>
    </button>
    You can’t perform that action at this time.
  </div>


    
    
    
    
  <div class="js-stale-session-flash stale-session-flash flash flash-warn flash-banner d-none">
    <svg class="octicon octicon-alert" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg>
    <span class="signed-in-tab-flash">You signed in with another tab or window. <a href="https://github.com/Glench/fuzzyset.js">Reload</a> to refresh your session.</span>
    <span class="signed-out-tab-flash">You signed out in another tab or window. <a href="https://github.com/Glench/fuzzyset.js">Reload</a> to refresh your session.</span>
  </div>
  <div class="facebox" id="facebox" style="display:none;">
  <div class="facebox-popup">
    <div class="facebox-content" role="dialog" aria-labelledby="facebox-header" aria-describedby="facebox-description">
    </div>
    <button type="button" class="facebox-close js-facebox-close" aria-label="Close modal">
      <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"></path></svg>
    </button>
  </div>
</div>

  <div class="Popover js-hovercard-content position-absolute" style="display: none; outline: none;" tabindex="0">
  <div class="Popover-message Popover-message--bottom-left Popover-message--large Box box-shadow-large" style="width:360px;">
  </div>
</div>

<div id="hovercard-aria-description" class="sr-only">
  Press h to open a hovercard with more details.
</div>



<script src="../lib/fuzzyset.js" charset="utf-8"></script>
<!-- dev build
<script src="react.js" charset="utf-8"></script>
<script src="react-dom.js" charset="utf-8"></script>
-->

<script src="react.min.js" charset="utf-8"></script>
<script src="react-dom.min.js" charset="utf-8"></script>

<script src="popper.min.js" charset="utf-8"></script>
<script src="react-tippy.js" charset="utf-8"></script>
<link media="all"  rel="stylesheet" href="./tippy.css">

<script src="codemirror-5.38.0/lib/codemirror.js" charset="utf-8"></script>
<script src="codemirror-5.38.0/mode/javascript/javascript.js" charset="utf-8"></script>
<script>
  function clamp(num, min, max) {
    return num <= min ? min : num >= max ? max : num;
  }

  function showPopup(reactElement) {
    var overlay = document.querySelector('#popup-overlay')
    ReactDOM.render(reactElement, overlay.querySelector('#popup-content'), function() { MathJax.Hub.Queue(["Typeset",MathJax.Hub]) })
    overlay.style.display = 'flex';
  }

  function hidePopup() {
    document.querySelector('#popup-overlay').style.display = 'none';
  }

  var ReactCodeMirror = React.createClass({
    displayName: 'React-Codemirror',
    componentDidMount: function() {
      this.codemirrorInstance = CodeMirror.fromTextArea(this.refs.textarea, this.props.options)
      this.codemirrorInstance.on('change', this.codemirrorValueChanged)
      this.updateStyle();
    },
    updateStyle: function() {
      if (this.props.style && this.props.style.height !== null) {
        this.codemirrorInstance.getWrapperElement().style.height = this.props.style.height;
      }
    },
    componentWillReceiveProps: function(nextProps) {
      if (nextProps.options.value !== this.codemirrorInstance.getValue()) {
        this.codemirrorInstance.setValue(nextProps.options.value);
      }
    },
    componentDidUpdate: function(prevProps) {
      this.updateStyle();
    },
    codemirrorValueChanged: function(doc, change) {
      if (this.props.options.onChange && change.origin !== 'setValue') {
        this.props.options.onChange(doc.getValue(), change);
      }
    },
    componentWillUnmount: function() {
      if (this.codemirrorInstance) {
        this.codemirrorInstance.toTextArea();
      }
    },
    render: function() {
      return React.createElement('div', {className: this.props.className}, React.createElement('textarea', {ref: 'textarea', autoComplete: 'off', defaultValue: this.props.options.value}))
    }
  });
</script>


<script>
var Vector = React.createClass({
  render: function() {
    var rows = [];
    rows.push(
        React.createElement('tr', {key: 'header'}, [
          React.createElement('th', {key: 'gram'}, 'gram'),
          React.createElement('th', {key: 'count'}, 'count'),
        ])
    );
    var firstIndexNotOne = null;
    var firstIndexNotOneForSpaceCharacter = null;
    Object.entries(this.props.vector).forEach(function(pair, i) {
      var gram = pair[0];
      var count = pair[1];
      var parenthesis = null;
      if (firstIndexNotOne === null && count > 1) {
        firstIndexNotOne = i;
        parenthesis = React.createElement('td', {key: '${gram}-${count}-${this.props.value}-description'}, React.createElement('small', null, `The gram '${gram}' occurs ${count} times in '${this.props.value}'`));
      }
      if (!parenthesis && firstIndexNotOneForSpaceCharacter === null && gram.indexOf(' ') > -1) {
        firstIndexNotOneForSpaceCharacter = i;
        parenthesis = React.createElement('td', {key: 'parenthesis'}, React.createElement('small', null, 'Spaces are shown as the _ (underscore) character in this UI, but are stored as spaces.'))
      }
      rows.push(
        React.createElement('tr', {key: `${gram}-${count}`}, [
          React.createElement('td', {key: gram}, gram.replace(' ', '_')),
          React.createElement('td', {key: count}, count),
          parenthesis
        ])
      )
    }.bind(this))
    return React.createElement('table', {style: {maxHeight: 400, overflow: 'auto'}}, React.createElement('tbody', null, rows))
  }
});

var ConvertToVector = React.createClass({
  getInitialState: function() {
    return {
      'code': document.querySelector('#gramCounter').innerText,
      'codeError': false,
      'theError': null,
      'value': 'Mississippi',
      'gramSize': 3,
    }
  },
  changeValue: function(evt) {
    this.setState({value: evt.target.value});
  },
  changeGramSize: function(evt) {
    var gramSize = this.state.gramSize;
    try {
      gramSize = parseInt(evt.target.value, 10)
    } catch(e) {}
    this.setState({gramSize: gramSize})
  },
  changeCode: function(code) {
    var error = false;
    var the_error = null;
    try {
      eval(code)
    } catch(e) {
      error = true;
      the_error = e.toString();
    }
    this.setState({code: code, codeError: error, theError: the_error})
  },
  resetCode: function(evt) {
    evt.preventDefault();
    this.setState({code: document.querySelector('#gramCounter').innerText, codeError: false})
  },
  render: function() {
    return React.createElement('div', {className: 'fuzzyset-excode'}, [
      React.createElement('h3', {key: 'title', style: {marginBottom: 0, fontSize: 22}}, 'Turning a string into a vector'),
      React.createElement('div', {key: 'container', style: {display: 'grid', gridTemplateColumns: '50% 50%'}}, [
        React.createElement('div', {key: 'example', style: {width: 440, overflow: 'auto'}}, [
          React.createElement('h3', {key: 'header'}, 'Example'),
          React.createElement('table', {key: 'table', className: 'no-zebra'},
            React.createElement('tbody', null, [
              React.createElement('tr', {key: 'value'}, [
                React.createElement('td', {key: 'value-label'}, 'value:'),
                React.createElement('td', {key: 'value-value'},
                  React.createElement('input', {value: this.state.value, onChange: this.changeValue}), React.createElement('small', null, ' <- try changing this!')
                ),
              ]),
              React.createElement('tr', {key: 'gramSize'}, [
                React.createElement('td', {key: 'gramSize-label'}, 'gramSize:'),
                React.createElement('td', {key: 'gramSize-value'},
                  React.createElement('input', {value: this.state.gramSize, onChange: this.changeGramSize, size: this.state.gramSize.toString().length})
                ),
              ]),
              React.createElement('tr', {key: 'functioncall'}, [
                React.createElement('td', {key: 'functioncall-label'}, 'function call:'),
                React.createElement('td', {key: 'functioncall-value'}, React.createElement('code', null, `_gramCounter('${this.state.value.replace("'", "\\'")}', ${this.state.gramSize})`)),
              ]),
              React.createElement('tr', {key: 'output'}, [
                React.createElement('td', {key: 'output-label', style: {'verticalAlign': 'top'}}, 'vector output:'),
                React.createElement('td', {key: 'output-value'}, React.createElement(Vector, {value: this.state.value, vector: _gramCounter(this.state.value, this.state.gramSize)})),
              ]),
              React.createElement('tr', {key: 'paren'}, 
                React.createElement('td', {colSpan: 2}, React.createElement('small', null, '(We use -dashes- to mark the beginning and end of words because these are more likely to be correct in misspellings. Also, we normalize the string by converting to lowercase and removing non-alphanumeric characters.)')),
              ),
            ])
          ),
        ]),
        React.createElement('div', {key: 'code', style: {width: 440}}, [
            [ React.createElement('h3', {key: 'header', style: {display: 'inline-block'}}, 'Code'), this.state.code === document.querySelector('#gramCounter').innerText ? React.createElement('small', {key: 'paren', style: {paddingLeft: 5}}, '  (try editing! maybe add some console.log() statements)') : React.createElement('a', {href: '#null', onClick: this.resetCode}, ' (reset)')],
            React.createElement(ReactCodeMirror, {key: 'code', className: this.state.codeError ? 'error': '', style: {height: 'auto'}, options: {value: this.state.code, mode: 'javascript', theme: 'github', onChange: this.changeCode}}),
            React.createElement('p', {key: 'error', className: 'small-p'}, this.state.theError)
          ]
        )
      ])
    ])
  }
})

var Magnitude = React.createClass({
  render: function() {

    var rows = [
      React.createElement('tr', {key: 'header'}, [
        React.createElement('th', {key: 'label', colSpan: 2}, `\\(${this.props.label}\\)`),
      ]),
      React.createElement('tr', {key: 'inputs'}, [
        React.createElement('td', {key: 'input', colSpan: 2},
          React.createElement('input', {value: this.props.value, onChange: this.props.change})
        ),
      ]),
      React.createElement('tr', {key: 'column-labels'}, [
        React.createElement('td', {key: 'gram'}, 'gram'),
        React.createElement('td', {key: 'count'}, 'count'),
        React.createElement('td', {key: 'count^2'}, 'count²'),
      ])
    ];

    var vector = _gramCounter(this.props.value, this.props.gramSize);
    var sum = 0;
    Object.entries(vector).forEach(function(entry) {
      var gram = entry[0];
      var count = entry[1];
      rows.push(React.createElement('tr', {key: 'row-'+gram}, [
        React.createElement('td', {key: 'gram'}, gram),
        React.createElement('td', {key: 'count'}, count),
        React.createElement('td', {key: 'count^2'}, count*count),
      ]))
      sum += count*count;
    });
    rows.push(React.createElement('tr', {key: 'sum'}, [
      React.createElement('td', {key: 'sum-label', colSpan: 2, style: {textAlign: 'right'}}, 'sum:'),
      React.createElement('td', {key: 'sum-sum'}, sum),
    ]))

    var sqrt = Math.sqrt(sum)
    rows.push(React.createElement('tr', {key: 'sqrtsum'}, [
      React.createElement('td', {key: 'sqrtsum-label', colSpan: 2, style: {textAlign: 'right'}}, `\\(\\left\\lVert ${this.props.label} \\right\\rVert = \\sqrt{sum}\\) = `),
      React.createElement('td', {key: 'sqrtsum-sum', style: {backgroundColor: 'yellow', fontWeight: 'bold'}}, sqrt == Math.floor(sqrt) ? sqrt : sqrt.toFixed(3)),
    ]))

    return React.createElement('table', {style: this.props.style}, React.createElement('tbody', null, rows));
  }
});

function getSum(total, num) {
    return total + num;
}

var FinalCosine = React.createClass({
  componentDidUpdate: function() {
    MathJax.Hub.Queue(["Typeset",MathJax.Hub, this.refs.similarity]);
  },
  render: function() {
    var A = _gramCounter(this.props.A, 3);
    var B = _gramCounter(this.props.B, 3);
    var dotproduct = Object.entries(A).map(function (entry) { return entry[1] * (B[entry[0]] || 0)}).reduce(getSum);

    var aMagnitude = Math.sqrt(Object.values(A).map(function(x){ return x*x }).reduce(getSum));
    var bMagnitude = Math.sqrt(Object.values(B).map(function(x) { return x*x }).reduce(getSum));

    var similarity = dotproduct / (aMagnitude * bMagnitude);

    if (similarity != Math.floor(similarity)) {
      similarity = similarity.toFixed(3);
    }

    if (aMagnitude != Math.floor(aMagnitude)) {
      aMagnitude = aMagnitude.toFixed(3)
    }
    if (bMagnitude != Math.floor(bMagnitude)) {
      bMagnitude = bMagnitude.toFixed(3)
    }
    return React.createElement('div', {style: {padding: 40}}, [
      React.createElement('div', {key: 'inputs', style: {display: 'grid', gridTemplateColumns: '1fr 1fr', gridGap: 30}}, [
        React.createElement('div', {key: 'A', style: {textAlign: 'right'}}, [
          React.createElement('label', null, 'A: '),
          React.createElement('input', {value: this.props.A, onChange: this.props.changeA})
        ]),
        React.createElement('div', {key: 'B'}, [
          React.createElement('label', null, 'B: '),
          React.createElement('input', {value: this.props.B, onChange: this.props.changeB})
        ]),
      ]),
      React.createElement('div', {key: 'math', ref: 'similarity'}, `$$\\frac{A \\cdot B}{\\left\\lVert A \\right\\rVert \\left\\lVert B \\right\\rVert} =  \\frac{${dotproduct}}{${aMagnitude} \\times ${bMagnitude}} = ${similarity}$$`)
    ])
  }
});

var DotProduct = React.createClass({
  displayName: 'DotProduct',
  render: function() {
    var Agrams = _gramCounter(this.props.A, this.props.gramSize);
    var Bgrams = _gramCounter(this.props.B, this.props.gramSize);
    var AgramEntries = Object.entries(Agrams)
    var BgramEntries = Object.entries(Bgrams)
    var biggerList = AgramEntries.length > BgramEntries.length ? AgramEntries : BgramEntries;
    var smallerList = AgramEntries.length <= BgramEntries.length ? AgramEntries : BgramEntries;

    var sharedGrams = {};
    // interleave grams
    for (var i = 0; i < biggerList.length; ++i) {
      if (smallerList[i]) {
        var entry = smallerList[i];
        var gram = entry[0];
        var count = entry[1];
        sharedGrams[gram] = count;
      }

      var entry = biggerList[i];
      var gram = entry[0];
      var count = entry[1];
      sharedGrams[gram] = count;
    }

    var sum = 0;
    var rows = [
      React.createElement('tr', {key: 'header'}, [
        React.createElement('th', {key: 'A', colSpan: 2}, '\\(A\\)'),
        React.createElement('th', {key: ' '}, '\\(\\cdot\\)'),
        React.createElement('th', {key: 'B', colSpan: 2}, '\\(B\\)')
      ]),
      React.createElement('tr', {key: 'inputs'}, [
        React.createElement('td', {key: 'input', colSpan: 2},
          React.createElement('input', {value: this.props.A, onChange: this.props.changeA})
        ),
        React.createElement('td', {key: ' '}, ' '),
        React.createElement('td', {key: 'input2', colSpan: 2},
          React.createElement('input', {value: this.props.B, onChange: this.props.changeB})
        ),
      ]),
      React.createElement('tr', {key: 'vector'}, [
          React.createElement('th', {key: 'gram'}, 'gram'),
          React.createElement('th', {key: 'count'}, 'count'),
          React.createElement('th', {key: ' '}, ' '),
          React.createElement('th', {key: 'gram2'}, 'gram'),
          React.createElement('th', {key: 'count2'}, 'count'),
      ]),
    ];
    Object.entries(sharedGrams).forEach(function(entry) {
      var gram = entry[0];
      var shouldUnhighlightA = !Agrams[gram];
      var shouldUnhighlightB = !Bgrams[gram];
      var shouldHighlightRow = gram in Agrams && gram in Bgrams;
      var mult = (Agrams[gram] || 0) * (Bgrams[gram] || 0);
      sum += mult; // stateful thing!
      var row = React.createElement('tr', {key: gram+'-row', className: shouldHighlightRow ? 'highlight' : ''}, [
        React.createElement('td', {key: gram, className: shouldUnhighlightA ? 'unhighlight' : ''}, gram.replace(' ', '_')),
        React.createElement('td', {key: gram+'A'+Agrams[gram], className: shouldUnhighlightA ? 'unhighlight': ''}, Agrams[gram] || 0),
        React.createElement('td', {key: gram+'x'}, '×'),
        React.createElement('td', {key: gram+2, className: shouldUnhighlightB ? 'unhighlight' : ''}, gram.replace(' ', '_')),
        React.createElement('td', {key: gram+'B'+Bgrams[gram], className: shouldUnhighlightB ? 'unhighlight' : ''}, Bgrams[gram] || 0),
        React.createElement('td', {key: gram+'='}, '='),
        React.createElement('td', {key: gram+'sum', className: shouldUnhighlightA || shouldUnhighlightB ? 'unhighlight' : ''}, mult),
      ])

      rows.push(row);
    }.bind(this))
    rows.push(React.createElement('tr', {key: 'sum-row'}, [
      React.createElement('td', {key: 'sum', colSpan: 6, style: {textAlign: 'right'}}, 'sum:'),
      React.createElement('td', {key: 'sum'+sum, style: {backgroundColor: 'yellow', fontWeight: 'bold'}}, sum)
    ]))

    return React.createElement('table', {key: 'table', style: {padding: '20px 0 40px 0', margin: '0 auto', width: 600}}, React.createElement('tbody', null, rows))
  }
});

var CosineSimilarity = React.createClass({
  displayName: 'CosineSimilarity',
  getInitialState: function() {
    return {
      A: 'mossisippi',
      B: 'Mississippi',
    }
  },
  changeA: function(evt) {
    this.setState({A: evt.target.value})
  },
  changeB: function(evt) {
    this.setState({B: evt.target.value})
  },
  render: function() {

    return React.createElement('div', null, [
      React.createElement('div', {className: 'fuzzyset-wide', style: {overflow: 'auto', height: 765}}, [
        React.createElement('h3', {key: 'header'}, 'Calculating the dot product of two vectors \\((A \\cdot B)\\)'),
        React.createElement(DotProduct, {A: this.state.A, B: this.state.B, changeA: this.changeA, changeB: this.changeB, gramSize: 3})
      ]),
      React.createElement('p', null, 'To calculate the magnitudes ( \\(\\left\\lVert A \\right\\rVert\\) and \\(\\left\\lVert B \\right\\rVert\\)) we take the root of the sum of squares of each vector:'),
      React.createElement('div', {className: 'fuzzyset-wide', style: {overflow: 'auto', height: 716}}, [
        React.createElement('h3', {key: 'header'}, 'Calculating the vector magnitudes \\((\\left\\lVert A \\right\\rVert\\) and \\(\\left\\lVert B \\right\\rVert)\\)'),
        React.createElement('div', {key: 'container', style: {display: 'grid', gridGap: 30, gridTemplateColumns: '1fr 1fr', marginTop: 30, marginBottom: 40}}, [
          React.createElement(Magnitude, {key: 'a', label: 'A', value:this.state.A, change: this.changeA, style: {paddingLeft: 100}, gramSize: 3}),
          React.createElement(Magnitude, {key: 'b', label: 'B', value:this.state.B, change: this.changeB, gramSize: 3}),
        ])
      ]),
      React.createElement('p', null, 'Putting all that together we get:'),
      React.createElement('div', {className: 'fuzzyset-wide', style: {paddingTop: 1}},[
        React.createElement('h3', {key: 'head'}, 'Calculating the cosine similarity score'),
        React.createElement(FinalCosine, {key: 'similarity', A: this.state.A, B: this.state.B, changeA: this.changeA, changeB: this.changeB})
      ])
      ]
    );
  }
})

var StorageExample = React.createClass({
  displayName: 'StorageExample',
  onClick: function(evt) {
    evt.preventDefault();
    this.props.setStrings(this.props.strings)
  },
  render: function() {
    return React.createElement(this.props.inline ? 'span' : 'div', null, 
      React.createElement('a', {href: '#null', onClick: this.onClick}, this.props.name)
    )
  }
})
var Storage = React.createClass({
  displayName: 'Storage',
  getInitialState: function() {
    return {
      code: document.querySelector('#fuzzyset-add').innerText,
      codeError: false,
      newString: '',
      dictionary: 'Mississippi',
      itemsHighlightIndex: null,
      user_has_interacted: false,
    }
  },
  componentDidUpdate: function() {
  },
  setStrings: function(strings) {
    this.setState({dictionary: strings.join('\n')})
  },
  changeDictionary: function(evt) {
    this.setState({dictionary: evt.target.value})
  },
  changeCode: function(code) {
    var error = false;
    try {
      eval(code)
    } catch(e) {
      error = true;
    }
    this.setState({code: code, codeError: error})
  },
  setHighlightIndex: function(index) {
    return function() { this.setState({itemsHighlightIndex: index, user_has_interacted: true}) }.bind(this);
  },
  resetCode: function(evt) {
    evt.preventDefault();
    this.setState({code: document.querySelector('#fuzzyset-add').innerText})
  },
  render: function() {
    var strings = this.state.dictionary.split('\n');

    var fs = FuzzySet([], false, 3,3);
    if (!this.state.codeError) {
      fs.add = fuzzyset.add.bind(fs)
      fs._add = fuzzyset._add.bind(fs)
      fs._normalizeStr = fuzzyset._normalizeStr.bind(fs);
      try {
        strings.forEach(function(str) { fs.add(str) })
      } catch(e) {
        console.error(e)
        fs = FuzzySet(strings, false, 3,3);
      }
    } else {
      fs = FuzzySet(strings, false, 3,3);
    }

    return React.createElement('div', null, [
      React.createElement('div', {key: 'code-and-input', style: {display: 'grid', gridTemplateColumns: '42% 56%', gap: 15}}, [
        React.createElement('div', {key: 'strings'}, [
          React.createElement('h3', null, 'Example'),
          React.createElement('div', {style: {maxHeight: 500, overflow: 'auto'}},
            React.createElement('table', {className: 'no-zebra'}, React.createElement('tbody', null, [
              React.createElement('tr', {key: 'other-examples'}, [
                React.createElement('td', null, 'Examples:'),
                React.createElement('td', null, [
                  React.createElement(StorageExample, {key: '1', name: 'Mississippi / Missouri', setStrings: this.setStrings, strings: ['Mississippi', 'Missouri']}),
                  React.createElement(StorageExample, {key: '2', name: 'Mississippi / Missouri / California', setStrings: this.setStrings, strings: ['Mississippi', 'Missouri', 'California']}),
                  React.createElement(StorageExample, {key: '3', name: 'All US states', setStrings: this.setStrings, strings: US_state_list.split('\n')}), 
                  this.state.dictionary !== 'Mississippi' ? React.createElement(StorageExample, {key: 'reset', name: 'Reset', setStrings: this.setStrings, strings: ['Mississippi']}) : React.createElement('div', null, 'Or try your own below'), 
                ]),
              ]),
              React.createElement('tr', {key: 'string-inputs'}, [
                React.createElement('td', {style: {verticalAlign: 'top'}}, 'List of strings: (separated by newlines)'),
                React.createElement('td', null, React.createElement('textarea', {rows: clamp(strings.length, 2, 10), placeholder: 'Add strings separated by newlines', value: this.state.dictionary, onChange: this.changeDictionary})),
              ]),
              React.createElement('tr', {key: 'function-call'}, [
                React.createElement('td', {style: {verticalAlign: 'top'}}, 'Function call:'),
                React.createElement('td', {style: {maxWidth: 140}}, React.createElement('code', null, `fuzzyset = FuzzySet([${strings.map(function(str) { return `'${str.replace("\'", "\\\'")}'` }).join(', ')}], false, 3,3)`)),
              ]),
            ]))
          ),
        ]),
        React.createElement('div', {key: 'code-right'}, [
          React.createElement('h3', {key: 'header'}, 'Code', this.state.code == document.querySelector('#fuzzyset-add').innerText ? React.createElement('small', {style: {fontWeight: 'normal'}}, ' Try editing!') : React.createElement('small', {style: {fontWeight: 'normal'}}, React.createElement('a', {href: '#null', onClick: this.resetCode}, ' Reset'))),
          React.createElement(ReactCodeMirror, {key: 'code', className: this.state.codeError ? 'error':'', style: {height: '500px'}, options: {value: this.state.code, mode: 'javascript', onChange: this.changeCode, theme: 'github'}})
        ])
      ]),
      React.createElement('div', {key: 'output', className: 'result'}, React.createElement('div', null, [
        React.createElement('h3', {style: {textAlign: 'center', border: '1px solid #ccc', padding: 10, margin: 0, backgroundColor: 'white'}}, 'Result'),
        React.createElement('div', {style: {display: 'grid', gridTemplateColumns: '27.5% 35% 35%', gap: 15}}, [
          React.createElement('div', null, [
            React.createElement('h4', {style: {textAlign: 'center'}}, React.createElement('code', null, 'fuzzyset.matchDict')),
            React.createElement('div', {style:{maxHeight: 600, overflow: 'auto', marginBottom: 10}},
              React.createElement('table', null, [
                React.createElement('thead', null, [
                  React.createElement('tr', null, [
                    React.createElement('th', null, 'key'),
                    React.createElement('th', null, 'value'),
                  ]),
                  React.createElement('tr', null, [
                    React.createElement('th', {rowSpan: 2}, 'gram'),
                    React.createElement('th', null, 'array of:'),
                  ]),
                  React.createElement('tr', null, [
                    React.createElement('th', null, '(index to fuzzyset.items, count of \\(B\\))'),
                  ])
                ]),
                React.createElement('tbody', null, 
                  Object.entries(fs.matchDict).map(function (entry,gram_i) {
                    return React.createElement('tr', null, [
                      React.createElement('td', null, entry[0]),
                      React.createElement('td', null, entry[1].map(function(pair, i) {
                        return React.createElement('div', null, [
                          React.createElement('span', {key: 'start-bracket'}, i == 0 ? '[(' : '\u00A0('),
                          React.createElement(reactTippy.Tooltip, {
                            className: 'detail-hover',
                            duration: 0,
                            onShow: this.setHighlightIndex(pair[0]),
                            onHide: this.setHighlightIndex(null),
                            html: React.createElement('span', null, `The gram "${entry[0]}" appears in the word `, React.createElement('b', null, `"${fs.items[3][pair[0]][1]}"`), `, item number `, React.createElement('span', {style: {color: 'red'}}, pair[0]), ` in fuzzyset.items`),
                            key: 'item-index'
                          }, pair[0]),
                          React.createElement('span', {key: 'comma'}, ', '),
                          React.createElement(reactTippy.Tooltip, {
                            className: 'detail-hover',
                            key: 'count',
                            duration: 0,
                            onShow: this.setHighlightIndex(null),                            
                            html: React.createElement('span', null, `The gram "${entry[0]}" appears in `, React.createElement('b', null, `"${fs.items[3][pair[0]][1]}" `), React.createElement('span', {style: {color: 'red'}}, pair[1]), ` ${pair[1] == 1 ? 'time': 'times'}`)
                          }, pair[1]),
                          React.createElement('span', {key: 'end-bracket'}, i == entry[1].length-1 ? ')]': ')'),
                          gram_i == 0 && i == entry[1].length-1 ? React.createElement('p', {className: 'small-p', style: {display: 'inline-block', marginBottom: 0, marginTop: 5, marginLeft: 14}}, '\u2B06\u00A0\u00A0 \u2B06 Hover over each number for a detailed description') : null,
                        ])
                      }.bind(this))),
                    ])
                  }.bind(this))
                ),
              ]),
            ),
            React.createElement('p', {className: 'small-p'}, 'See ', React.createElement(StorageExample, {inline: true, name: 'the "Mississippi / Missouri" example', strings: ['Mississippi', 'Missouri'], setStrings: this.setStrings}), ' for more detail when words have shared grams.')
          ]),
          React.createElement('div', null, [
            React.createElement('h4', {style: {textAlign: 'center'}}, React.createElement('code', null, 'fuzzyset.items')),
            React.createElement('table', null, [
              React.createElement('thead', null, [
                React.createElement('tr', null, [
                  React.createElement('th', null, 'key'),
                  React.createElement('th', null, 'value'),
                ]),
                React.createElement('tr', null, [
                  React.createElement('th', {rowSpan: 2}, 'gram size'),
                  React.createElement('th', null, 'array of:'),
                ]),
                React.createElement('tr', null, [
                  React.createElement('th', null, '(\\(\\left\\lVert B \\right\\rVert\\), index to fuzzyset.exactSet)'),
                ])
              ]),
              React.createElement('tbody', null, 
                Object.entries(fs.items).map(function(entry) {
                  return React.createElement('tr', null, [
                    React.createElement('td', null, entry[0]),
                    React.createElement('td', {style: {maxWidth: 140, overflow: 'auto', whiteSpace: 'nowrap'}}, entry[1].map(function(pair, i) {
                      var magnitude = pair[0];
                      if (magnitude !== Math.floor(magnitude)) {
                        magnitude = magnitude.toFixed(3)
                      }
                      return React.createElement('div', null, i == 0 ? '[' : '\u00A0', React.createElement('span', {style: {color: i === this.state.itemsHighlightIndex ? 'white' : 'inherit', backgroundColor: i == this.state.itemsHighlightIndex ? 'red': 'inherit'}}, `(${magnitude}, ${pair[1]})`), `${ i == entry[1].length-1 ? ']': ''}`)
                    }.bind(this))),
                  ])
                }.bind(this))
              ),
            ]),
            React.createElement('p', {className: 'small-p'}, "This table is keyed by gram size so we can make a tradeoff between precision and lookup time. More on that in the next section."),
          ]),
          React.createElement('div', null, [
            React.createElement('h4', {style: {textAlign: 'center'}}, React.createElement('code', null, 'fuzzyset.exactSet')),
            React.createElement('table', null, [
              React.createElement('thead', null, [
                React.createElement('tr', null, [
                  React.createElement('th', null, 'key'),
                  React.createElement('th', null, 'value'),
                ]),
                React.createElement('tr', null, [
                  React.createElement('th', null, 'normalized string'),
                  React.createElement('th', null, 'original string'),
                ])
              ]),
              React.createElement('tbody', null, 
                Object.entries(fs.exactSet).map(function(entry) {
                  return React.createElement('tr', null, [
                    React.createElement('td', {style: {maxWidth: 120}}, entry[0]),
                    React.createElement('td', {style: {maxWidth: 120}}, entry[1]),
                  ])
                })
              ),
            ]),
          ]),
        ]),
      ]))
    ])
  }
});
var US_state_list = `Alabama\nAlaska\nArizona\nArkansas\nCalifornia\nColorado\nConnecticut\nDelaware\nFlorida\nGeorgia\nHawaii\nIdaho\nIllinois\nIndiana\nIowa\nKansas\nKentucky\nLouisiana\nMaine\nMaryland\nMassachusetts\nMichigan\nMinnesota\nMississippi\nMissouri\nMontana\nNebraska\nNevada\nNew Hampshire\nNew Jersey\nNew Mexico\nNew York\nNorth Carolina\nNorth Dakota\nOhio\nOklahoma\nOregon\nPennsylvania\nRhode Island\nSouth Carolina\nSouth Dakota\nTennessee\nTexas\nUtah\nVermont\nVirginia\nWashington\nWest Virginia\nWisconsin\nWyoming`

var StartExample = React.createClass({
  displayName: 'StartExample',
  getInitialState: function() {
    return {
      lookup: 'mossisippi',
      dictionary: US_state_list,
    }
  },
  changeLookup: function(evt) {
    this.setState({lookup: evt.target.value})
  },
  changeDictionary: function(evt) {
    this.setState({dictionary: evt.target.value})
  },
  setLookup: function(term) {
    return function(evt) { evt.preventDefault(); this.setState({lookup: term})}.bind(this)
  },
  render: function() {
    var fuzzyset = FuzzySet(this.state.dictionary.split('\n'), false);
    var result = fuzzyset.get(this.state.lookup);
    return React.createElement('div', {style: {display: 'grid', gridTemplateColumns: '23% 26% 42%', gridGap: 30}}, [
      React.createElement('div', {key: 'dictionary', style: {marginLeft: 20}}, [
        React.createElement('h3', {key: 'header'}, 'Dictionary'),
        React.createElement('textarea', {key: 'input', value: this.state.dictionary, onChange: this.changeDictionary, rows: 15, style: {border: '1px solid #ccc', width: '100%'}}),
        React.createElement('small', {key: 'caption', style: {display: 'block'}}, 'Try replacing with your own text, separated by newlines'),
        React.createElement('h4', {key: 'code-header'}, 'Code'),
        React.createElement('pre', {key: 'code', style: {width: 200, maxHeight: 100}}, `fs = FuzzySet([${this.state.dictionary.split('\n').map(function(term) { return `'${term.replace("\'", "\\\'")}'` }).join(',\n')}], false)`)
      ]),
      React.createElement('div', {key: 'lookup'}, [
        React.createElement('h3', {key: 'header'}, 'Look up'),
        React.createElement('input', {key: 'input', value: this.state.lookup, onChange: this.changeLookup}),
        React.createElement('div', {key: 'example'}, [
          React.createElement('small', {key: 'ortry'}, 'or try: '),
          React.createElement('small', {key: 'first'}, React.createElement('a', {href: '#null', onClick: this.setLookup('masachusets')}, 'masachusets, ')),
          React.createElement('small', {key: 'second'}, React.createElement('a', {href: '#null', onClick: this.setLookup('missiouri')}, 'missiouri, ')),
          React.createElement('small', {key: 'third'}, React.createElement('a', {href: '#null', onClick: this.setLookup('south')}, 'south')),
        ]),
        React.createElement('h4', {key: 'code-header'}, 'Code'),
        React.createElement('pre', {key: 'code'}, `fs.get('${this.state.lookup.replace("\'", "\\\'")}')`)

      ]),
      React.createElement('div', {key: 'result'}, [
        React.createElement('h3', {key: 'header'}, 'Result'),
        React.createElement('table', {key: 'table'}, React.createElement('tbody', null, [
          React.createElement('tr', {key: 'titles'}, [
            React.createElement('th', {key: 'term-title'}, 'Dictionary Term'),
            React.createElement('th', {key: 'score-title'}, 'Similarity Score'),
          ]),
          result ? result.map(function(item) { return React.createElement('tr', null, [
            React.createElement('td', {key: 'string'}, item[1]),
            React.createElement('td', {key: 'score'}, item[0] !== Math.floor(item[0]) ? item[0].toFixed(3) : item[0])
          ]) }) : React.createElement('tr', null, [
            React.createElement('td', {colSpan: 2, style: {textAlign: 'center', fontStyle: 'italic'}}, 'No results found')
          ])
        ])),
        React.createElement('h4', {key: 'code-header'}, 'Code'),
        React.createElement('pre', {key: 'code'}, result ? `[${result.map(function(item) { return `[${item[0]}, '${item[1].replace("\'", "\\\'")}']` }).join(',\n')}]`: 'null')
      ]),
    ])
  }
});

function isEmptyObject(obj) {
    for(var prop in obj) {
        if(obj.hasOwnProperty(prop))
            return false;
    }
    return true;
}

var sortDescending = function(key) {
  return function(a,b) {
    if (a[key] < b[key]) {
        return 1;
    } else if (a[key] > b[key]) {
        return -1;
    } else {
        return 0;
    }
  }
};

function sharedGrams(str1, str2, gramCount) {
  var grams1 = _gramCounter(str1, gramCount);
  var grams2 = _gramCounter(str2, gramCount);
  return Object.keys(grams1).filter(function(gram) { return gram in grams2})
}

var Lookup = React.createClass({
  displayName: 'Lookup',
  getInitialState: function() {
    return {
      dictionary: US_state_list,
      gramSizeUpper: 3,
      gramSizeLower: 2,
      useLevenshtein: false,
      lookup: 'mossisippi',
      min_match_score: .33,
    }
  },
  handleDictionaryChange: function(evt) {
    this.setState({dictionary: evt.target.value})
  },
  handleLookupChange: function(evt) {
    this.setState({lookup: evt.target.value})
  },
  handle_levenshtein_change: function(evt) {
    this.setState({useLevenshtein: evt.target.checked})
  },
  handle_upper_change: function(evt) {
    this.setState({gramSizeUpper: parseInt(evt.target.value, 10)})
  },
  handle_lower_change: function(evt) {
    this.setState({gramSizeLower: parseInt(evt.target.value, 10)})
  },
  handle_min_score_change: function(evt) {
    this.setState({min_match_score: parseFloat(evt.target.value)})
  },
  north_example: function(evt) {
    evt.preventDefault();
    this.setState({min_match_score: .33, useLevenshtein: false, lookup: 'north', gramSizeUpper: 3, gramSizeLower: 2})
  },
  nroth_kadota_example: function(evt) {
    evt.preventDefault();
    this.setState({min_match_score: .33, useLevenshtein: false, lookup: 'nroth kadota', gramSizeUpper: 3, gramSizeLower: 2})
  },
  nroth_kadota_levenshtein_example: function(evt) {
    evt.preventDefault();
    this.setState({min_match_score: .33, useLevenshtein: true, lookup: 'nroth kadota', gramSizeUpper: 3, gramSizeLower: 2})
  },
  dotproduct_click: function(normalized_lookup, match, gram_size) {
    return function(evt) {
      evt.preventDefault();
      showPopup(React.createElement(DotProduct, {A: normalized_lookup, B: match, gramSize: gram_size}))
    }
  },
  magnitude_click: function(label, value, gramSize) {
    return function(evt) { 
      evt.preventDefault();
      showPopup(React.createElement(Magnitude, {label: label, value: value, gramSize: gramSize}))}
  },
  render: function() {
    var fs = FuzzySet(this.state.dictionary.split('\n'), this.state.useLevenshtein, this.state.gramSizeLower, this.state.gramSizeUpper);
    var results = fs.get(this.state.lookup, null, this.state.min_match_score);

    var table_rows = [
      React.createElement('tr', {key: 'table-rows'}, [
        React.createElement('th', {key: 'lookup'}, 'Lookup (\\(A\\))'),
        React.createElement('th', {key: 'match'}, 'Match (\\(B\\))'),
        React.createElement('th', {key: 'shared'}, 'Shared Grams', React.createElement('p', {className: 'small-p'}, '(found in fuzzyset.matchDict)')),
        React.createElement('th', {key: 'a dot b'}, '\\(A \\cdot B\\)', React.createElement('p', {className: 'small-p'})),
        React.createElement('th', {key: 'magnitude of a'}, '\\(\\left\\lVert A \\right\\rVert\\)'),
        React.createElement('th', {key: 'magnitude of b'}, '\\(\\left\\lVert B \\right\\rVert\\)', React.createElement('p', {className: 'small-p'},' (from fuzzyset.items)')),
        React.createElement('th', {key: 'cosine similarity', className: this.state.useLevenshtein ? '' : 'sorted'}, `$$\\frac{A \\cdot B}{\\left\\lVert A \\right\\rVert \\left\\lVert B \\right\\rVert}$$ Score`),
        this.state.useLevenshtein ? React.createElement('th', {key: 'levenshtein_header', className: this.state.useLevenshtein ? 'sorted' : ''}, `Levenshtein score`) : null,
      ])
    ];
    var table_columns_count = this.state.useLevenshtein ? 8 : 7;
    var normalized_lookup = fs._normalizeStr(this.state.lookup);

    if (normalized_lookup in fs.exactSet) {
      table_rows.push(React.createElement('tr', null, React.createElement('td', {colSpan: table_columns_count, style: {textAlign: 'center'}}, `Exact result found in fuzzyset.exactSet: ${fs.exactSet[normalized_lookup]}`)))
    }  


    for (var gram_size = this.state.gramSizeUpper; gram_size >= this.state.gramSizeLower; --gram_size) {
      if (normalized_lookup in fs.exactSet) break;

      table_rows.push(React.createElement('tr', {key: `${gram_size}-grams_header`}, [
        React.createElement('th', {key: `${gram_size}-grams_header_cell`, colSpan: table_columns_count}, `${gram_size}-gram matches`)
        ])
      )


      var lookup_vector = _gramCounter(normalized_lookup, gram_size);
      var lookup_magnitude = 0;
      var matches = {};
      for (gram in lookup_vector) {
        var gram_count = lookup_vector[gram];
        lookup_magnitude += Math.pow(gram_count, 2);
        if (gram in fs.matchDict) {
          for (var i = 0; i < fs.matchDict[gram].length; ++i) {
            var items_index_and_count_pair = fs.matchDict[gram][i];
            var items_index = items_index_and_count_pair[0];
            var dict_term_gram_count = items_index_and_count_pair[1];
            if (items_index in matches) {
              matches[items_index] += gram_count * dict_term_gram_count;
            } else {
              matches[items_index] = gram_count * dict_term_gram_count;
            }
          }
        }
      }

      if (isEmptyObject(matches)) {
        table_rows.push(React.createElement('tr', {key: `${gram_size}-no-results`}, 
          React.createElement('th', {colSpan: table_columns_count, style: {fontStyle: 'italic', fontWeight: 'normal'}}, 'No matches')
        ))
        continue;
      }

      lookup_magnitude = Math.sqrt(lookup_magnitude);

      var items = fs.items[gram_size];
      var match_rows = [];
      for (match_items_index in matches) {
        var row = {
          match: items[match_items_index][1],
          magnitude: items[match_items_index][0],
          dot_product: matches[match_items_index],
          cosine_similarity: matches[match_items_index] / (lookup_magnitude * items[match_items_index][0]),
        }
        match_rows.push(row)
      }

      match_rows.sort(sortDescending('cosine_similarity'));

      if (this.state.useLevenshtein) {
        var truncated_rows = Math.min(50, match_rows.length)
        for (var k = 0; k < truncated_rows; ++k) {
          var row = match_rows[k];
          row.levenshtein_distance = _distance(row.match, normalized_lookup);
        }
        match_rows.sort(sortDescending('levenshtein_distance'))
      }

      var last_row_filtered = false;
      match_rows.forEach(function(row, j) {
        var score = this.state.useLevenshtein ? row.levenshtein_distance : row.cosine_similarity;
        var className = score < this.state.min_match_score ? 'filtered' : '';
        if (!last_row_filtered && score < this.state.min_match_score) {
          className += ' first-filtered'
          last_row_filtered = true;
        }
        table_rows.push(React.createElement('tr', {key: `gramsize-${gram_size}-row-${j}`, className: className}, [
          React.createElement('td', {key: 'lookup'}, normalized_lookup),
          React.createElement('td', {key: 'match'}, row.match),
          React.createElement('td', {key: 'shared'}, sharedGrams(normalized_lookup, row.match, gram_size).map(function(gram) { return gram.replace(/ /g, '_') }).join(', ')),
          React.createElement('td', {key: 'dot_product'}, React.createElement('a', {href: '#null', onClick: this.dotproduct_click(normalized_lookup, row.match, gram_size)}, row.dot_product)),
          React.createElement('td', {key: 'a_magnitude'}, React.createElement('a', {href: '#null', onClick: this.magnitude_click('A', normalized_lookup, gram_size)}, lookup_magnitude == Math.floor(lookup_magnitude) ? lookup_magnitude : lookup_magnitude.toFixed(3))),
          React.createElement('td', {key: 'b_magnitude'}, React.createElement('a', {href: '#null', onClick: this.magnitude_click('B', row.match, gram_size)}, row.magnitude == Math.floor(row.magnitude) ? row.magnitude : row.magnitude.toFixed(3))),
          React.createElement('td', {key: 'cosine'}, row.cosine_similarity == Math.floor(row.cosine_similarity) ? row.cosine_similarity : row.cosine_similarity.toFixed(3)),
          this.state.useLevenshtein ? React.createElement('td', {key: 'levenshtein'}, row.levenshtein_distance == Math.floor(row.levenshtein_distance) ? row.levenshtein_distance : row.levenshtein_distance.toFixed(3)) : null,
        ]))
      }.bind(this))

      var key = this.state.useLevenshtein ? 'levenshtein_distance' : 'cosine_similarity';
      if (match_rows.length > 0 && match_rows.map(function(row) { return row[key] }).some(function(score) { return score >= this.state.min_match_score }.bind(this))) {
        break;
      }

    }

    return React.createElement('div', null, [
      React.createElement('h3', {key: 'header', style: {marginBottom: 0}}, 'How Fuzzyset looks up strings'),
      React.createElement('div', {key: 'inputs', style: {display: 'grid', gridTemplateColumns: '25% 27% 48%'}}, [
        React.createElement('div', {key: 'dict'}, [
          React.createElement('h3', {key: 'head'}, 'Dictionary'),
          React.createElement('textarea', {key: 'textarea', value: this.state.dictionary, onChange: this.handleDictionaryChange, rows: 10}),
          React.createElement('div', {key: 'levenshtein', style: {margin: '10px 0'}}, [
            React.createElement('input', {key: 'useLevenshtein', type: 'checkbox', checked: this.state.useLevenshtein, onChange: this.handle_levenshtein_change, id: 'useLevenshtein'}),
            React.createElement('label', {key: 'levenshteinlabel', htmlFor: 'useLevenshtein'}, ' useLevenshtein?'),
          ]),
          React.createElement('div', {key: 'gramsizeupper', style: {margin: '10px 0'}}, [
            React.createElement('label', {key: 'upperlabel', htmlFor: 'upper'}, 'gramSizeUpper: '),
            React.createElement('input', {key: 'upper', id: 'upper', size: this.state.gramSizeUpper.toString().length, value: this.state.gramSizeUpper, onChange: this.handle_upper_change}),
          ]),
          React.createElement('div', {key: 'gramsizelower', style: {margin: '10px 0'}}, [
            React.createElement('label', {key: 'lowerlabel', htmlFor: 'lower'}, ' gramSizeLower: '),
            React.createElement('input', {key: 'lower', id: 'lower', size: this.state.gramSizeLower.toString().length, value: this.state.gramSizeLower, onChange: this.handle_lower_change})
          ]),
        ]),
        React.createElement('div', {key: 'lookup'}, [
          React.createElement('h3', {key: 'head'}, 'Lookup'),
          React.createElement('div', {key: 'lookup', style: {margin: '10px 0'}},
            React.createElement('input', {value: this.state.lookup, onChange: this.handleLookupChange}),
          ),
          React.createElement('p', {key: 'e.g.', className: 'small-p'}, 'Examples: ', React.createElement('a', {href: '#null', onClick: this.north_example}, 'north, '), React.createElement('a', {href: '#null', onClick: this.nroth_kadota_example}, 'nroth kadota, '), React.createElement('a', {href: '#null', onClick: this.nroth_kadota_levenshtein_example}, 'nroth kadota with levenshtein score')),
          React.createElement('label', {key: 'matchscore', htmlFor: 'min_match_score'}, 'Minimum score (0-1): '),
          React.createElement('input', {key: 'min_match_score', id: 'min_match_score', value: this.state.min_match_score, size: this.state.min_match_score.toString().length, style: {display: 'block'}, onChange: this.handle_min_score_change}),
          React.createElement('h3', {key: 'doublhead'}, 'Result'),
          React.createElement('div', {key: 'results'},
            React.createElement('table', null, React.createElement('tbody', null, [
              React.createElement('tr', {key: 'head'}, [
                React.createElement('th', {key: 'matchhead'}, 'Match'),
                React.createElement('th', {key: 'scorehead'}, 'Score'),
              ]),
              results ? results.map(function(result,i) {
                return React.createElement('tr', null, [
                  React.createElement('td', {key: `match-${i}`}, result[1]),
                  React.createElement('td', {key: `score-${i}`}, result[0] == Math.floor(result[0]) ? result[0] : result[0].toFixed(3))
                ])
              }) : React.createElement('tr', null, [
                React.createElement('td', {colSpan: 2, style: {textAlign: 'center'}}, 'No matches')
              ])
            ]))
          )
        ]),
        React.createElement('div', {key: 'code'}, [
          React.createElement('h3', {key: 'head'}, 'Code', React.createElement('small', {style: {fontWeight: 'normal'}}, '\u00A0 fuzzyset.get() is the top-level function')),
          React.createElement(ReactCodeMirror, {key: 'codemirror', options: {value: document.querySelector('#lookup').innerText, readOnly: true}, style: {height: '700px'}})
        ]),
      ]),
      React.createElement('h3', {key: 'results-header', style: {border: '1px solid rgb(204,204,204)', textAlign: 'center', padding: 10, margin: 0, backgroundColor: 'white'}}, `Calling fuzzyset.get("${this.state.lookup.replace('"', '\\"')}", null, ${this.state.min_match_score})`),
      React.createElement('table', {key: 'how-it-works-table', style: {display: 'table'}}, React.createElement('tbody', null, table_rows))
    ])
  }
})

ReactDOM.render(React.createElement(ConvertToVector), document.querySelector('#fuzzyset-vectorize'))
ReactDOM.render(React.createElement(CosineSimilarity), document.querySelector('#fuzzyset-cosinesimilarity'))
ReactDOM.render(React.createElement(Storage), document.querySelector('#fuzzyset-storage'))
ReactDOM.render(React.createElement(StartExample), document.querySelector('#fuzzyset-starting-example'))
ReactDOM.render(React.createElement(Lookup), document.querySelector('#fuzzyset-lookup'))
</script>

<script>
(function(funcName, baseObj) {
    // The public function name defaults to window.docReady
    // but you can pass in your own object and own function name and those will be used
    // if you want to put them in a different namespace
    funcName = funcName || "docReady";
    baseObj = baseObj || window;
    var readyList = [];
    var readyFired = false;
    var readyEventHandlersInstalled = false;

    // call this when the document is ready
    // this function protects itself against being called more than once
    function ready() {
        if (!readyFired) {
            // this must be set to true before we start calling callbacks
            readyFired = true;
            for (var i = 0; i < readyList.length; i++) {
                // if a callback here happens to add new ready handlers,
                // the docReady() function will see that it already fired
                // and will schedule the callback to run right after
                // this event loop finishes so all handlers will still execute
                // in order and no new ones will be added to the readyList
                // while we are processing the list
                readyList[i].fn.call(window, readyList[i].ctx);
            }
            // allow any closures held by these functions to free
            readyList = [];
        }
    }

    function readyStateChange() {
        if ( document.readyState === "complete" ) {
            ready();
        }
    }

    // This is the one public interface
    // docReady(fn, context);
    // the context argument is optional - if present, it will be passed
    // as an argument to the callback
    baseObj[funcName] = function(callback, context) {
        if (typeof callback !== "function") {
            throw new TypeError("callback for docReady(fn) must be a function");
        }
        // if ready has already fired, then just schedule the callback
        // to fire asynchronously, but right away
        if (readyFired) {
            setTimeout(function() {callback(context);}, 1);
            return;
        } else {
            // add the function and context to the list
            readyList.push({fn: callback, ctx: context});
        }
        // if document already ready to go, schedule the ready function to run
        if (document.readyState === "complete") {
            setTimeout(ready, 1);
        } else if (!readyEventHandlersInstalled) {
            // otherwise if we don't have event handlers installed, install them
            if (document.addEventListener) {
                // first choice is DOMContentLoaded event
                document.addEventListener("DOMContentLoaded", ready, false);
                // backup is window load event
                window.addEventListener("load", ready, false);
            } else {
                // must be IE
                document.attachEvent("onreadystatechange", readyStateChange);
                window.attachEvent("onload", ready);
            }
            readyEventHandlersInstalled = true;
        }
    }
})("docReady", window);

docReady(function() {
  if (location.search.split('embedded').length == 2) {
    var element = document.querySelector('#starting');
    var el_rect = element.getBoundingClientRect();
    window.scrollTo(0, el_rect.top)
  }
})

</script>

<div id="popup-overlay" style="position: fixed; top: 0px; bottom: 0px; left: 0px; right: 0px; background: rgba(0, 0, 0, 0.5); display: none; z-index: 999; padding-top: 100px;" class="markdown-body">
  <div id="popup-content" style="position: relative; background: rgb(255, 255, 255); width: 50%; margin: auto; border: 1px solid rgb(187, 187, 187); padding: 15px; overflow: auto; max-height: 95%; display: grid; grid-template-columns: 1fr; justify-items: center; box-shadow: 0 0 19px rgba(0,0,0, .5);">
  </div>
</div>

<script type="text/javascript">
  var overlay = document.querySelector('#popup-overlay')
  overlay.onclick = function(evt) {
    overlay.style.display = 'none';
  }
  overlay.querySelector('#popup-content').onclick = function(evt) {
    evt.stopPropagation();
    return false;
  }
</script>

<script async defer data-domain="glench.github.io/fuzzyset.js/ui" src="https://plausible.io/js/plausible.js"></script>

</body></html>
